<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper
        namespace="com.baison.e3plus.basebiz.order.service.dao.mapper.rds.RetailOrderBillMapper">
    <resultMap id="BaseResultMap"
               type="com.baison.e3plus.basebiz.order.api.model.RetailOrderBill">
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="pay_state" property="payState"
                jdbcType="INTEGER"/>
        <result column="customer_id" property="customerId"
                jdbcType="VARCHAR"/>
        <result column="channel_id" property="channelId"
                jdbcType="DECIMAL"/>
        <result column="amount_tag" property="amountTag"
                jdbcType="DECIMAL"/>
        <result column="remarks" property="remarks" jdbcType="VARCHAR"/>
        <result column="currency_type_id" property="currencyTypeId"
                jdbcType="DECIMAL"/>
        <result column="status" property="status" jdbcType="INTEGER"/>
        <result column="qty" property="qty" jdbcType="DECIMAL"/>
        <result column="submit_by" property="submitBy"
                jdbcType="VARCHAR"/>
        <result column="canal_id" property="canalId" jdbcType="DECIMAL"/>
        <result column="member_name" property="memberName"
                jdbcType="VARCHAR"/>
        <result column="platform_id" property="platformId"
                jdbcType="DECIMAL"/>
        <result column="warehouse_id" property="warehouseId"
                jdbcType="DECIMAL"/>
        <result column="virtual_warehouse_codes" property="virtualWareHouseCodes"
                jdbcType="VARCHAR"/>
        <result column="create_date" property="createDate"
                jdbcType="TIMESTAMP"/>
        <result column="amount_paid" property="amountPaid"
                jdbcType="DECIMAL"/>
        <result column="confirm_date" property="confirmDate"
                jdbcType="TIMESTAMP"/>
        <result column="shop_id" property="shopId" jdbcType="DECIMAL"/>
        <result column="discount" property="discount"
                jdbcType="DECIMAL"/>
        <result column="vip_card_no" property="vipCardNo"
                jdbcType="VARCHAR"/>
        <result column="bill_no" property="billNo" jdbcType="VARCHAR"/>
        <result column="brand_id" property="brandId" jdbcType="DECIMAL"/>
        <result column="stock_channel_id" property="stockChannelId"
                jdbcType="DECIMAL"/>
        <result column="amount_goods" property="amountGoods"
                jdbcType="DECIMAL"/>
        <result column="modify_date" property="modifyDate"
                jdbcType="TIMESTAMP"/>
        <result column="distribution_state"
                property="distributionState" jdbcType="VARCHAR"/>
        <result column="settle_channel_id" property="settleChannelId"
                jdbcType="DECIMAL"/>
        <result column="complete_date" property="completeDate"
                jdbcType="TIMESTAMP"/>
        <result column="abolish_date" property="abolishDate"
                jdbcType="TIMESTAMP"/>
        <result column="confirm_by" property="confirmBy"
                jdbcType="VARCHAR"/>
        <result column="source_bill_no" property="sourceBillNo"
                jdbcType="VARCHAR"/>
        <result column="submit_date" property="submitDate"
                jdbcType="TIMESTAMP"/>
        <result column="abolish_by" property="abolishBy"
                jdbcType="VARCHAR"/>
        <result column="business_date" property="businessDate"
                jdbcType="TIMESTAMP"/>
        <result column="modify_by" property="modifyBy"
                jdbcType="VARCHAR"/>
        <result column="express_fee" property="expressFee"
                jdbcType="DECIMAL"/>
        <result column="create_by" property="createBy"
                jdbcType="VARCHAR"/>
        <result column="complete_by" property="completeBy"
                jdbcType="VARCHAR"/>
        <result column="whareatype_id" property="whareatypeId"
                jdbcType="DECIMAL"/>
        <result column="delivery_type" property="deliveryType"
                jdbcType="VARCHAR"/>
        <result column="exchange_rate_type" property="exchangeratetype"
                jdbcType="VARCHAR"/>
        <result column="exchange_rate" property="exchangerate"
                jdbcType="DECIMAL"/>
        <result column="tax" property="tax" jdbcType="DECIMAL"/>
        <result column="total_tax_price" property="totalTaxPrice"
                jdbcType="DECIMAL"/>
        <result column="amount_standard_money"
                property="amountStandardMoney" jdbcType="DECIMAL"/>
        <result column="tax_standard_money" property="taxStandardMoney"
                jdbcType="DECIMAL"/>
        <result column="total_tax_price_standard_money"
                property="totalTaxPriceStandardMoney" jdbcType="DECIMAL"/>
        <result column="amount_total" property="amountTotal"
                jdbcType="DECIMAL"/>
        <result column="base_currency_id" property="baseCurrencyId"
                jdbcType="DECIMAL"/>
        <result column="receiver" property="receiver"
                jdbcType="VARCHAR"/>
        <result column="member_id" property="memberId"
                jdbcType="DECIMAL"/>
        <result column="is_from_oms" property="isFromOms"
                jdbcType="VARCHAR"/>
        <result column="payable_amount" property="payableAmount"
                jdbcType="DECIMAL"/>
        <result column="pay_settle_method_id"
                property="paySettleMethodId" jdbcType="INTEGER"/>
        <result column="wms_bill_no" property="wmsBillNo"
                jdbcType="VARCHAR"/>
        <result column="is_push_sap" property="isPushSap"
                jdbcType="VARCHAR"/>
        <result column="order_type" property="orderType"
                jdbcType="VARCHAR"/>
        <result column="oms_syn_order_status"
                property="omsSynOrderStatus" jdbcType="INTEGER"/>
        <result column="oms_syn_order_count"
                property="omsSynOrderCount" jdbcType="INTEGER"/>
        <result column="oms_syn_exp_status" property="omsSynExpStatus"
                jdbcType="INTEGER"/>
        <result column="oms_syn_exp_count" property="omsSynExpCount"
                jdbcType="INTEGER"/>
        <result column="support_cash_on_delivery" property="supportCashOnDelivery"
                jdbcType="INTEGER"/>
        <result column="pre_sale_order_bill" property="preSaleOrderBill"
                jdbcType="INTEGER"/>
        <result column="settleDetails" property="preSaleOrderBill"
                jdbcType="INTEGER"/>
        <result column="is_confirm" property="isConfirm"
                jdbcType="INTEGER"/>
        <result column="freight" property="freight" jdbcType="DECIMAL" />
        <result column="goods_concession" property="goodsConcession" jdbcType="DECIMAL"/>
        <result column="other_concession" property="otherConcession" jdbcType="DECIMAL"/>
        <result column="distribution_fee_amount" property="distributionfeeAmount" jdbcType="DECIMAL"/>
		<result column="cash_coupon_amount" property="cashCouponAmount"
                jdbcType="DECIMAL"/>
        <result column="coupon_amount" property="couponAmount"
                jdbcType="DECIMAL"/>
        <result column="coupons_info" property="couponsInfo"
                jdbcType="VARCHAR"/>
        <result column="sales_promotion" property="salesPromotion"
                jdbcType="VARCHAR"/>
        <result column="wms_date" property="wmsDate" jdbcType="TIMESTAMP"/>
        <result column="has_return" property="hasReturn"
                jdbcType="INTEGER"/>
        <result column="ORIGINAL_RETAIL_BILL_NO" property="originalRetailBillNo"
                jdbcType="VARCHAR"/>
        <result column="EXEMPT_AUDIT_DELAY_TIME" property="exemptAuditDelayTime"
                jdbcType="TIMESTAMP"/>
        <result column="EXEMPT_AUDIT_FLAG" property="exemptAuditFlag"
                jdbcType="VARCHAR"/>
        <collection property="settleDetails" ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderSettleDetail"
                    select="getSettleDetails"
                    column="bill_no"/>
    </resultMap>

    <resultMap id="BaseResultFilterRetailOrderBillMap" type="com.baison.e3plus.basebiz.order.api.model.RetailOrderBill">
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="platform_id" property="platformId" jdbcType="DECIMAL"/>
        <result column="shop_id" property="shopId" jdbcType="DECIMAL"/>
        <result column="bill_no" property="billNo" jdbcType="VARCHAR"/>
        <result column="source_bill_no" property="sourceBillNo" jdbcType="VARCHAR"/>
        <result column="business_date" property="businessDate" jdbcType="TIMESTAMP"/>
        <result column="has_return" property="hasReturn" jdbcType="INTEGER"/>
        <result column="order_type" property="orderType" jdbcType="VARCHAR"/>
        <collection property="goodsDetail" column="bill_no"
                    ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderGoodsDetail">
            <id column="id" property="id" jdbcType="BIGINT"/>
            <result column="barcode" property="barcode" jdbcType="VARCHAR"/>
            <result column="bill_no" property="billNo" jdbcType="VARCHAR"/>
            <result column="singleproduct_id" property="singleProductId" jdbcType="INTEGER"/>
            <result column="goods_id" property="goodsId" jdbcType="INTEGER"/>
        </collection>
        <collection property="advancedDistributionInfos" column="bill_no"
                    ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderDistributionInfo">
            <id column="id" property="id" jdbcType="BIGINT"/>
            <result column="bill_no" property="billNo" jdbcType="VARCHAR" />
            <result column="receiver" property="receiver" jdbcType="VARCHAR" />
            <result column="receiver_tel" property="receiverTel" jdbcType="VARCHAR" />
            <result column="address" property="address" jdbcType="VARCHAR" />
            <result column="delivery_type_id" property="deliveryTypeId"
                    jdbcType="INTEGER" />
            <result column="delivery_no" property="deliveryNo" jdbcType="VARCHAR" />
        </collection>
        <collection property="settleDetails" column="bill_no"
                    ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderSettleDetail">
            <id column="id" property="id" jdbcType="BIGINT" />
            <result column="bill_no" property="billNo" jdbcType="VARCHAR" />
            <result column="pay_date" property="payDate" jdbcType="TIMESTAMP" />
        </collection>
    </resultMap>

    <select id="getSettleDetails" parameterType="java.lang.String"
            resultType="com.baison.e3plus.basebiz.order.api.model.RetailOrderSettleDetail">
      select
        id,bill_no,retail_order_bill_id,settlement_id,pay_date,amount_paid_in,amount_settle,integral_used
      from  ord_retail_ord_settl_de
      where bill_no = #{billNo,jdbcType=VARCHAR}
    </select>
    <resultMap id="SetMealRetailOrderGoodsResultMap"
               type="com.baison.e3plus.basebiz.order.api.model.SetMealRetailOrderGoods">
        <id column="id" property="setMealId" jdbcType="BIGINT"/>
        <result column="source_bill_no" property="sourceBillNo"
                jdbcType="VARCHAR"/>
        <result column="bill_no" property="orderBillNo"
                jdbcType="VARCHAR"/>
        <result column="set_meal_spec" property="setMealSpec"
                jdbcType="VARCHAR"/>
    </resultMap>
    <resultMap id="BaseResultWithGoodsDetailMap" type="com.baison.e3plus.basebiz.order.api.model.RetailOrderBill">
        <id column="r_id" property="id" jdbcType="BIGINT"/>
        <result column="r_billNo" property="billNo" jdbcType="VARCHAR"/>
        <result column="r_pay_state" property="payState" jdbcType="INTEGER"/>
        <result column="r_customer_id" property="customerId" jdbcType="VARCHAR"/>
        <result column="r_channel_id" property="channelId" jdbcType="DECIMAL"/>
        <result column="r_amount_tag" property="amountTag" jdbcType="DECIMAL"/>
        <result column="r_remarks" property="remarks" jdbcType="VARCHAR"/>
        <result column="r_currency_type_id" property="currencyTypeId" jdbcType="DECIMAL"/>
        <result column="r_status" property="status" jdbcType="INTEGER"/>
        <result column="r_qty" property="qty" jdbcType="DECIMAL"/>
        <result column="r_submit_by" property="submitBy" jdbcType="VARCHAR"/>
        <result column="r_canal_id" property="canalId" jdbcType="DECIMAL"/>
        <result column="r_member_name" property="memberName" jdbcType="VARCHAR"/>
        <result column="r_platform_id" property="platformId" jdbcType="DECIMAL"/>
        <result column="r_warehouse_id" property="warehouseId" jdbcType="DECIMAL"/>
        <result column="r_virtual_warehouse_codes" property="virtualWareHouseCodes" jdbcType="VARCHAR"/>
        <result column="r_create_date" property="createDate" jdbcType="TIMESTAMP"/>
        <result column="r_amount_paid" property="amountPaid" jdbcType="DECIMAL"/>
        <result column="r_confirm_date" property="confirmDate" jdbcType="TIMESTAMP"/>
        <result column="r_shop_id" property="shopId" jdbcType="DECIMAL"/>
        <result column="r_discount" property="discount" jdbcType="DECIMAL"/>
        <result column="r_vip_card_no" property="vipCardNo" jdbcType="VARCHAR"/>
        <result column="r_bill_no" property="billNo" jdbcType="VARCHAR"/>
        <result column="r_brand_id" property="brandId" jdbcType="DECIMAL"/>
        <result column="r_stock_channel_id" property="stockChannelId" jdbcType="DECIMAL"/>
        <result column="r_amount_goods" property="amountGoods" jdbcType="DECIMAL"/>
        <result column="r_modify_date" property="modifyDate" jdbcType="TIMESTAMP"/>
        <result column="r_distribution_state" property="distributionState" jdbcType="VARCHAR"/>
        <result column="r_settle_channel_id" property="settleChannelId" jdbcType="DECIMAL"/>
        <result column="r_complete_date" property="completeDate" jdbcType="TIMESTAMP"/>
        <result column="r_abolish_date" property="abolishDate" jdbcType="TIMESTAMP"/>
        <result column="r_confirm_by" property="confirmBy" jdbcType="VARCHAR"/>
        <result column="r_source_bill_no" property="sourceBillNo" jdbcType="VARCHAR"/>
        <result column="r_submit_date" property="submitDate" jdbcType="TIMESTAMP"/>
        <result column="r_abolish_by" property="abolishBy" jdbcType="VARCHAR"/>
        <result column="r_business_date" property="businessDate" jdbcType="TIMESTAMP"/>
        <result column="r_modify_by" property="modifyBy" jdbcType="VARCHAR"/>
        <result column="r_express_fee" property="expressFee" jdbcType="DECIMAL"/>
        <result column="r_create_by" property="createBy" jdbcType="VARCHAR"/>
        <result column="r_complete_by" property="completeBy" jdbcType="VARCHAR"/>
        <result column="r_whareatype_id" property="whareatypeId" jdbcType="DECIMAL"/>
        <result column="r_delivery_type" property="deliveryType" jdbcType="VARCHAR"/>
        <result column="r_exchange_rate_type" property="exchangeratetype" jdbcType="VARCHAR"/>
        <result column="r_exchange_rate" property="exchangerate" jdbcType="DECIMAL"/>
        <result column="r_tax" property="tax" jdbcType="DECIMAL"/>
        <result column="r_total_tax_price" property="totalTaxPrice" jdbcType="DECIMAL"/>
        <result column="r_amount_standard_money" property="amountStandardMoney" jdbcType="DECIMAL"/>
        <result column="r_tax_standard_money" property="taxStandardMoney" jdbcType="DECIMAL"/>
        <result column="r_total_tax_price_standard_money" property="totalTaxPriceStandardMoney" jdbcType="DECIMAL"/>
        <result column="r_amount_total" property="amountTotal" jdbcType="DECIMAL"/>
        <result column="r_base_currency_id" property="baseCurrencyId" jdbcType="DECIMAL"/>
        <result column="r_receiver" property="receiver" jdbcType="VARCHAR"/>
        <result column="r_member_id" property="memberId" jdbcType="DECIMAL"/>
        <result column="r_is_from_oms" property="isFromOms" jdbcType="VARCHAR"/>
        <result column="r_payable_amount" property="payableAmount" jdbcType="DECIMAL"/>
        <result column="r_pay_settle_method_id" property="paySettleMethodId" jdbcType="INTEGER"/>
        <result column="r_wms_bill_no" property="wmsBillNo" jdbcType="VARCHAR"/>
        <result column="r_is_push_sap" property="isPushSap" jdbcType="VARCHAR"/>
        <result column="order_type" property="orderType" jdbcType="VARCHAR"/>
        <result column="r_oms_syn_order_status" property="omsSynOrderStatus" jdbcType="INTEGER"/>
        <result column="r_oms_syn_order_count" property="omsSynOrderCount" jdbcType="INTEGER"/>
        <result column="r_oms_syn_exp_status" property="omsSynExpStatus" jdbcType="INTEGER"/>
        <result column="r_oms_syn_exp_count" property="omsSynExpCount" jdbcType="INTEGER"/>
        <result column="support_cash_on_delivery" property="supportCashOnDelivery" jdbcType="INTEGER"/>
        <result column="pre_sale_order_bill" property="preSaleOrderBill" jdbcType="INTEGER"/>
        <result column="r_wms_date" property="wmsDate" jdbcType="TIMESTAMP"/>
        <collection property="goodsDetail" column="g_retail_order_bill_id"
                    ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderGoodsDetail">
            <id column="g_id" property="id" jdbcType="BIGINT"/>
            <result column="g_owner_id" property="ownerId" jdbcType="INTEGER"/>
            <result column="g_amount_tag" property="amountTag" jdbcType="DECIMAL"/>
            <result column="g_barcode" property="barcode" jdbcType="VARCHAR"/>
            <result column="g_retail_order_bill_id" property="retailOrderBillId" jdbcType="BIGINT"/>
            <result column="g_status" property="status" jdbcType="INTEGER"/>
            <result column="g_amount_retail" property="amountRetail" jdbcType="DECIMAL"/>
            <result column="g_amount" property="amount" jdbcType="DECIMAL"/>
            <result column="g_qty" property="qty" jdbcType="DECIMAL"/>
            <result column="g_timestamp" property="timestamp" jdbcType="TIMESTAMP"/>
            <result column="g_price_cost" property="priceCost" jdbcType="DECIMAL"/>
            <result column="g_is_gift" property="isGift" jdbcType="VARCHAR"/>
            <result column="g_amount_discount" property="amountDiscount" jdbcType="DECIMAL"/>
            <result column="g_price" property="price" jdbcType="DECIMAL"/>
            <result column="g_amount_cost" property="amountCost" jdbcType="DECIMAL"/>
            <result column="g_amount_round" property="amountRound" jdbcType="DECIMAL"/>
            <result column="g_amount_settle" property="amountSettle" jdbcType="DECIMAL"/>
            <result column="g_amount_standard" property="amountStandard" jdbcType="DECIMAL"/>
            <result column="g_discount" property="discount" jdbcType="DECIMAL"/>
            <result column="g_price_retail" property="priceRetail" jdbcType="DECIMAL"/>
            <result column="g_bill_no" property="billNo" jdbcType="VARCHAR"/>
            <result column="g_singleproduct_id" property="singleProductId" jdbcType="INTEGER"/>
            <result column="g_price_tag" property="priceTag" jdbcType="DECIMAL"/>
            <result column="g_amount_share_settle" property="amountShareSettle" jdbcType="DECIMAL"/>
            <result column="g_amount_verify" property="amountVerify" jdbcType="DECIMAL"/>
            <result column="g_goods_id" property="goodsId" jdbcType="INTEGER"/>
            <result column="g_wh_area_type_id" property="whAreaTypeId" jdbcType="INTEGER"/>
            <result column="g_price_standard" property="priceStandard" jdbcType="DECIMAL"/>
            <result column="g_qty_returned" property="qtyReturned" jdbcType="DECIMAL"/>
            <result column="g_tax_inclusive_price" property="taxInclusivePrice" jdbcType="DECIMAL"/>
            <result column="g_tax" property="tax" jdbcType="DECIMAL"/>
            <result column="g_total_tax_price" property="totalTaxPrice" jdbcType="DECIMAL"/>
            <result column="g_amount_standard_money" property="amountStandardMoney" jdbcType="DECIMAL"/>
            <result column="g_tax_standard_money" property="taxStandardMoney" jdbcType="DECIMAL"/>
            <result column="g_total_tax_price_standard_money" property="totalTaxPriceStandardMoney" jdbcType="DECIMAL"/>
            <result column="g_weigh" property="weigh" jdbcType="DECIMAL"/>
            <result column="g_set_meal_spec" property="setMealSpec" jdbcType="VARCHAR"/>
        </collection>
        <collection property="advancedDistributionInfos" column="d_retail_order_bill_id"
                    ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderDistributionInfo">
            <id column="d_id" property="id" jdbcType="BIGINT"/>
            <result column="d_retail_order_bill_id" property="retailOrderBillId" jdbcType="BIGINT"/>
            <result column="d_weigh" property="weigh" jdbcType="DECIMAL"/>
            <result column="d_delivery_type_id" property="deliveryTypeId" jdbcType="INTEGER"/>
            <result column="d_delivery_no" property="deliveryNo" jdbcType="VARCHAR"/>
        </collection>
    </resultMap>
    <resultMap id="BaseResultSAP" type="com.baison.e3plus.basebiz.order.api.model.RetailOrderBill">
        <id column="r_id" property="id" jdbcType="BIGINT"/>
        <result column="r_billNo" property="billNo" jdbcType="VARCHAR"/>
        <result column="r_complete_date" property="completeDate" jdbcType="TIMESTAMP"/>
        <result column="r_shop_id" property="shopId" jdbcType="DECIMAL"/>
        <result column="r_currency_type_id" property="currencyTypeId" jdbcType="DECIMAL"/>
        <result column="r_warehouse_id" property="warehouseId" jdbcType="DECIMAL"/>
        <result column="r_wms_date" property="wmsDate" jdbcType="TIMESTAMP"/>
        <collection property="goodsDetail" column="g_retail_order_bill_id"
                    ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderGoodsDetail">
            <id column="g_id" property="id" jdbcType="BIGINT"/>
            <result column="g_goods_id" property="goodsId" jdbcType="INTEGER"/>
            <result column="g_singleproduct_id" property="singleProductId" jdbcType="INTEGER"/>
            <result column="g_qty" property="qty" jdbcType="DECIMAL"/>
            <result column="g_amount" property="amount" jdbcType="DECIMAL" />
            <result column="g_amount_settle" property="amountSettle"
                    jdbcType="DECIMAL" />
            <result column="g_amount_standard" property="amountStandard"
                    jdbcType="DECIMAL" />
        </collection>
        <collection property="settleDetails" ofType="com.baison.e3plus.basebiz.order.api.model.RetailOrderSettleDetail"
                    select="getSettleDetails"
                    column="r_billNo"/>
    </resultMap>

    <sql id="Base_Column_List">
		id, pay_state, customer_id, bill_date, channel_id,
		amount_tag, remarks,
		currency_type_id,
		status, qty, submit_by, canal_id,
		member_name, platform_id, warehouse_id,virtual_warehouse_codes,
		create_date,
		amount_paid,
		confirm_date, shop_id, discount, vip_card_no, bill_no, brand_id,
		stock_channel_id,
		amount_goods, modify_date, distribution_state,
		settle_channel_id, complete_date,
		abolish_date, confirm_by,
		source_bill_no, submit_date, abolish_by,
		business_date,
		modify_by,
		express_fee, create_by, complete_by, whareatype_id, delivery_type,
		exchange_rate_type,
		exchange_rate, tax, total_tax_price,
		amount_standard_money, tax_standard_money,
		total_tax_price_standard_money,
		amount_total, base_currency_id,
		receiver, member_id, is_from_oms, payable_amount,
		pay_settle_method_id,
		wms_bill_no, is_push_sap, oms_syn_order_status,
		oms_syn_order_count,
		oms_syn_exp_status,wms_date,order_type,
		oms_syn_exp_count,is_confirm,freight,goods_concession,other_concession,distribution_fee_amount,has_return,
		EXEMPT_AUDIT_FLAG,EXEMPT_AUDIT_DELAY_TIME,ORIGINAL_RETAIL_BILL_NO

	</sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap">
        select
        <if test="fields != null">
            ${fields}
        </if>
        <if test="fields == null">
            <include refid="Base_Column_List"/>
        </if>
        from ord_retail_order_bill
        where bill_no in

        <foreach item="id" index="index" collection="billNos" open="("
                 separator="," close=")">
            #{id}
        </foreach>
    </select>
    <select id="queryObjectBySql" resultMap="BaseResultWithGoodsDetailMap">
        <if test="sql != null">
            ${sql}
        </if>
    </select>
    <select id="updateBySql">
        <if test="sql != null">
            ${sql}
        </if>
    </select>

    <delete id="deleteByPrimaryKey" parameterType="java.util.List">
        delete from ord_retail_order_bill
        where id in
        <foreach item="item" index="index" collection="list" open="("
                 separator="," close=")">
            #{item,jdbcType=BIGINT}
        </foreach>
    </delete>
    <insert id="insert"
            parameterType="com.baison.e3plus.basebiz.order.api.model.RetailOrderBill">
		insert into ord_retail_order_bill (
		id,
		pay_state,
		customer_id,
		bill_date,
		channel_id,
		amount_tag,
		remarks,
		currency_type_id,
		status,
		qty,
		submit_by,
		canal_id,
		member_name,
		platform_id,
		warehouse_id,
		virtual_warehouse_codes,
		create_date,
		amount_paid,
		confirm_date,
		shop_id,
		discount,
		vip_card_no,
		bill_no,
		brand_id,
		stock_channel_id,
		amount_goods,
		 modify_date,
		 distribution_state,
		settle_channel_id,
		complete_date,
		 abolish_date,
		confirm_by,
		source_bill_no,
		submit_date,
		abolish_by,
		business_date,
		modify_by,
		express_fee,
		create_by,
		complete_by,
		whareatype_id,
		delivery_type,
		exchange_rate_type,
		exchange_rate,
		 tax,
		 total_tax_price,
		amount_standard_money,
		tax_standard_money,
		total_tax_price_standard_money,
		amount_total,
		base_currency_id,
		receiver,
		member_id,
		is_from_oms,
		payable_amount,
		pay_settle_method_id,
		 wms_bill_no,
		 is_push_sap,
		 order_type,
		oms_syn_order_status,
		oms_syn_order_count,
		oms_syn_exp_status,
		oms_syn_exp_count,
		goods_concession,
		other_concession,
		is_confirm,
		coupons_info,
		sales_promotion,
		exempt_Audit_Flag,
		exempt_Audit_Delay_Time,
		ORIGINAL_RETAIL_BILL_NO)
		values
		(#{id,jdbcType=BIGINT},
		 #{payState,jdbcType=VARCHAR},
		#{customerId,jdbcType=VARCHAR},
		#{billDate,jdbcType=VARCHAR},
		#{channelId,jdbcType=DECIMAL},
		#{amountTag,jdbcType=DECIMAL},
		#{remarks,jdbcType=VARCHAR},
		#{currencyTypeId,jdbcType=DECIMAL},
		 #{status,jdbcType=INTEGER},
		#{qty,jdbcType=DECIMAL},
		#{submitBy,jdbcType=VARCHAR},
		#{canalId,jdbcType=DECIMAL},
		#{memberName,jdbcType=VARCHAR},
		#{platformId,jdbcType=DECIMAL},
		#{warehouseId,jdbcType=DECIMAL},
		#{virtualWareHouseCodes,jdbcType=VARCHAR},
		#{createDate,jdbcType=TIMESTAMP},
		#{amountPaid,jdbcType=DECIMAL},
		#{confirmDate,jdbcType=TIMESTAMP},
		#{shopId,jdbcType=DECIMAL},
		#{discount,jdbcType=DECIMAL},
		#{vipCardNo,jdbcType=VARCHAR},
		#{billNo,jdbcType=VARCHAR},
		#{brandId,jdbcType=DECIMAL},
		#{stockChannelId,jdbcType=DECIMAL},
		#{amountGoods,jdbcType=DECIMAL},
		#{modifyDate,jdbcType=TIMESTAMP},
		#{distributionState,jdbcType=VARCHAR},
		#{settleChannelId,jdbcType=DECIMAL},
		#{completeDate,jdbcType=TIMESTAMP},
		#{abolishDate,jdbcType=TIMESTAMP},
		#{confirmBy,jdbcType=VARCHAR},
		 #{sourceBillNo,jdbcType=VARCHAR},
		#{submitDate,jdbcType=TIMESTAMP},
		#{abolishBy,jdbcType=VARCHAR},
		#{businessDate,jdbcType=TIMESTAMP},
		#{modifyBy,jdbcType=VARCHAR},
		#{expressFee,jdbcType=DECIMAL},
		#{createBy,jdbcType=VARCHAR},
		#{completeBy,jdbcType=VARCHAR},
		#{whareatypeId,jdbcType=DECIMAL},
		#{deliveryType,jdbcType=VARCHAR},
		#{exchangeratetype,jdbcType=VARCHAR},
		#{exchangerate,jdbcType=DECIMAL},
		#{tax,jdbcType=DECIMAL},
		#{totalTaxPrice,jdbcType=DECIMAL},
		#{amountStandardMoney,jdbcType=DECIMAL},
		#{taxStandardMoney,jdbcType=DECIMAL},
		#{totalTaxPriceStandardMoney,jdbcType=DECIMAL},
		#{amountTotal,jdbcType=DECIMAL},
		#{baseCurrencyId,jdbcType=DECIMAL},
		#{receiver,jdbcType=VARCHAR},
		 #{memberId,jdbcType=DECIMAL},
		#{isFromOms,jdbcType=VARCHAR},
		 #{payableAmount,jdbcType=DECIMAL},
		#{paySettleMethodId,jdbcType=INTEGER},
		 #{wmsBillNo,jdbcType=VARCHAR},
		#{isPushSap,jdbcType=VARCHAR},
		#{orderType,jdbcType=VARCHAR},
		#{omsSynOrderStatus,jdbcType=INTEGER},
		#{omsSynOrderCount,jdbcType=INTEGER},
		#{omsSynExpStatus,jdbcType=INTEGER},
		#{omsSynExpCount,jdbcType=INTEGER},
		#{goodsConcession,jdbcType=DECIMAL},
		#{otherConcession,jdbcType=DECIMAL},
		#{isConfirm,jdbcType=INTEGER},
		#{couponsInfo,jdbcType=VARCHAR},
		#{salesPromotion,jdbcType=VARCHAR},
		#{exemptAuditFlag,jdbcType=VARCHAR},
		#{exemptAuditDelayTime,jdbcType=VARCHAR},
		#{originalRetailBillNo,jdbcType=VARCHAR}
		)
	</insert>
    <insert id="insertSelective" parameterType="java.util.List">
        <foreach item="item" index="index" collection="list" separator=";">
            insert into ord_retail_order_bill
            <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="item.id != null">
                    id,
                </if>
                <if test="item.payState != null">
                    pay_state,
                </if>
                <if test="item.customerId != null">
                    customer_id,
                </if>
                <if test="item.channelId != null">
                    channel_id,
                </if>
                <if test="item.amountTag != null">
                    amount_tag,
                </if>
                <if test="item.remarks != null">
                    remarks,
                </if>
                <if test="item.currencyTypeId != null">
                    currency_type_id,
                </if>
                <if test="item.status != null">
                    status,
                </if>
                <if test="item.qty != null">
                    qty,
                </if>
                <if test="item.submitBy != null">
                    submit_by,
                </if>
                <if test="item.canalId != null">
                    canal_id,
                </if>
                <if test="item.memberName != null">
                    member_name,
                </if>
                <if test="item.platformId != null">
                    platform_id,
                </if>
                <if test="item.warehouseId != null">
                    warehouse_id,
                </if>
                <if test="item.virtualWareHouseCodes != null">
                    virtual_warehouse_codes,
                </if>
                <if test="item.createDate != null">
                    create_date,
                </if>
                <if test="item.amountPaid != null">
                    amount_paid,
                </if>
                <if test="item.confirmDate != null">
                    confirm_date,
                </if>
                <if test="item.shopId != null">
                    shop_id,
                </if>
                <if test="item.discount != null">
                    discount,
                </if>
                <if test="item.vipCardNo != null">
                    vip_card_no,
                </if>
                <if test="item.billNo != null">
                    bill_no,
                </if>
                <if test="item.brandId != null">
                    brand_id,
                </if>
                <if test="item.stockChannelId != null">
                    stock_channel_id,
                </if>
                <if test="item.amountGoods != null">
                    amount_goods,
                </if>
                <if test="item.modifyDate != null">
                    modify_date,
                </if>
                <if test="item.distributionState != null">
                    distribution_state,
                </if>
                <if test="item.settleChannelId != null">
                    settle_channel_id,
                </if>
                <if test="item.completeDate != null">
                    complete_date,
                </if>
                <if test="item.abolishDate != null">
                    abolish_date,
                </if>
                <if test="item.confirmBy != null">
                    confirm_by,
                </if>
                <if test="item.sourceBillNo != null">
                    source_bill_no,
                </if>
                <if test="item.submitDate != null">
                    submit_date,
                </if>
                <if test="item.abolishBy != null">
                    abolish_by,
                </if>
                <if test="item.businessDate != null">
                    business_date,
                </if>
                <if test="item.modifyBy != null">
                    modify_by,
                </if>
                <if test="item.expressFee != null">
                    express_fee,
                </if>
                <if test="item.createBy != null">
                    create_by,
                </if>
                <if test="item.completeBy != null">
                    complete_by,
                </if>
                <if test="item.whareatypeId != null">
                    whareatype_id,
                </if>
                <if test="item.deliveryType != null">
                    delivery_type,
                </if>
                <if test="item.exchangeratetype != null">
                    exchange_rate_type,
                </if>
                <if test="item.exchangerate != null">
                    exchange_rate,
                </if>
                <if test="item.tax != null">
                    tax,
                </if>
                <if test="item.totalTaxPrice != null">
                    total_tax_price,
                </if>
                <if test="item.amountStandardMoney != null">
                    amount_standard_money,
                </if>
                <if test="item.taxStandardMoney != null">
                    tax_standard_money,
                </if>
                <if test="item.totalTaxPriceStandardMoney != null">
                    total_tax_price_standard_money,
                </if>
                <if test="item.amountTotal != null">
                    amount_total,
                </if>
                <if test="item.baseCurrencyId != null">
                    base_currency_id,
                </if>
                <if test="item.receiver != null">
                    receiver,
                </if>
                <if test="item.memberId != null">
                    member_id,
                </if>
                <if test="item.isFromOms != null">
                    is_from_oms,
                </if>
                <if test="item.payableAmount != null">
                    payable_amount,
                </if>
                <if test="item.paySettleMethodId != null">
                    pay_settle_method_id,
                </if>
                <if test="item.wmsBillNo != null">
                    wms_bill_no,
                </if>
                <if test="item.isPushSap != null">
                    is_push_sap,
                </if>
                <if test="item.orderType != null">
                    order_type,
                </if>
                <if test="item.omsSynOrderStatus != null">
                    oms_syn_order_status,
                </if>
                <if test="item.omsSynOrderCount != null">
                    oms_syn_order_count,
                </if>
                <if test="item.omsSynExpStatus != null">
                    oms_syn_exp_status,
                </if>
                <if test="item.omsSynExpCount != null">
                    oms_syn_exp_count,
                </if>
                <if test="item.supportCashOnDelivery != null">
                    support_cash_on_delivery,
                </if>
                <if test="item.preSaleOrderBill != null">
                    pre_sale_order_bill,
                </if>
                <if test="item.goodsConcession != null">
                    goods_concession,
                </if>
                <if test="item.otherConcession != null">
                    other_concession,
                </if>
                <if test="item.distributionfeeAmount != null">
                    distribution_fee_amount,
                </if>
                <if test="item.cashCouponAmount != null">
                    cash_coupon_amount,
                </if>
                <if test="item.couponAmount != null">
                    coupon_amount,
                </if>
                <if test="item.isConfirm != null">
                    is_confirm,
                </if>
                <if test="item.couponsInfo != null">
                    coupons_info,
                </if>
                <if test="item.salesPromotion != null">
                    sales_promotion,
                </if>
                <if test="item.originalRetailBillNo != null">
                    ORIGINAL_RETAIL_BILL_NO,
                </if>
                <if test="item.exemptAuditFlag != null">
                    EXEMPT_AUDIT_FLAG,
                </if>
                <if test="item.billDate != null">
                    bill_date,
                </if>
            </trim>
            <trim prefix="values (" suffix=")" suffixOverrides=",">
                <if test="item.id != null">
                    #{item.id,jdbcType=BIGINT},
                </if>
                <if test="item.payState != null">
                    #{item.payState,jdbcType=VARCHAR},
                </if>
                <if test="item.customerId != null">
                    #{item.customerId,jdbcType=VARCHAR},
                </if>
                <if test="item.channelId != null">
                    #{item.channelId,jdbcType=DECIMAL},
                </if>
                <if test="item.amountTag != null">
                    #{item.amountTag,jdbcType=DECIMAL},
                </if>
                <if test="item.remarks != null">
                    #{item.remarks,jdbcType=VARCHAR},
                </if>
                <if test="item.currencyTypeId != null">
                    #{item.currencyTypeId,jdbcType=DECIMAL},
                </if>
                <if test="item.status != null">
                    #{item.status,jdbcType=INTEGER},
                </if>
                <if test="item.qty != null">
                    #{item.qty,jdbcType=DECIMAL},
                </if>
                <if test="item.submitBy != null">
                    #{item.submitBy,jdbcType=VARCHAR},
                </if>
                <if test="item.canalId != null">
                    #{item.canalId,jdbcType=DECIMAL},
                </if>
                <if test="item.memberName != null">
                    #{item.memberName,jdbcType=VARCHAR},
                </if>
                <if test="item.platformId != null">
                    #{item.platformId,jdbcType=DECIMAL},
                </if>
                <if test="item.warehouseId != null">
                    #{item.warehouseId,jdbcType=DECIMAL},
                </if>
                <if test="item.virtualWareHouseCodes != null">
                    #{item.virtualWareHouseCodes,jdbcType=VARCHAR},
                </if>
                <if test="item.createDate != null">
                    #{item.createDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.amountPaid != null">
                    #{item.amountPaid,jdbcType=DECIMAL},
                </if>
                <if test="item.confirmDate != null">
                    #{item.confirmDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.shopId != null">
                    #{item.shopId,jdbcType=DECIMAL},
                </if>
                <if test="item.discount != null">
                    #{item.discount,jdbcType=DECIMAL},
                </if>
                <if test="item.vipCardNo != null">
                    #{item.vipCardNo,jdbcType=VARCHAR},
                </if>
                <if test="item.billNo != null">
                    #{item.billNo,jdbcType=VARCHAR},
                </if>
                <if test="item.brandId != null">
                    #{item.brandId,jdbcType=DECIMAL},
                </if>
                <if test="item.stockChannelId != null">
                    #{item.stockChannelId,jdbcType=DECIMAL},
                </if>
                <if test="item.amountGoods != null">
                    #{item.amountGoods,jdbcType=DECIMAL},
                </if>
                <if test="item.modifyDate != null">
                    #{item.modifyDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.distributionState != null">
                    #{item.distributionState,jdbcType=VARCHAR},
                </if>
                <if test="item.settleChannelId != null">
                    #{item.settleChannelId,jdbcType=DECIMAL},
                </if>
                <if test="item.completeDate != null">
                    #{item.completeDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.abolishDate != null">
                    #{item.abolishDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.confirmBy != null">
                    #{item.confirmBy,jdbcType=VARCHAR},
                </if>
                <if test="item.sourceBillNo != null">
                    #{item.sourceBillNo,jdbcType=VARCHAR},
                </if>
                <if test="item.submitDate != null">
                    #{item.submitDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.abolishBy != null">
                    #{item.abolishBy,jdbcType=VARCHAR},
                </if>
                <if test="item.businessDate != null">
                    #{item.businessDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.modifyBy != null">
                    #{item.modifyBy,jdbcType=VARCHAR},
                </if>
                <if test="item.expressFee != null">
                    #{item.expressFee,jdbcType=DECIMAL},
                </if>
                <if test="item.createBy != null">
                    #{item.createBy,jdbcType=VARCHAR},
                </if>
                <if test="item.completeBy != null">
                    #{item.completeBy,jdbcType=VARCHAR},
                </if>
                <if test="item.whareatypeId != null">
                    #{item.whareatypeId,jdbcType=DECIMAL},
                </if>
                <if test="item.deliveryType != null">
                    #{item.deliveryType,jdbcType=VARCHAR},
                </if>
                <if test="item.exchangeratetype != null">
                    #{item.exchangeratetype,jdbcType=VARCHAR},
                </if>
                <if test="item.exchangerate != null">
                    #{item.exchangerate,jdbcType=DECIMAL},
                </if>
                <if test="item.tax != null">
                    #{item.tax,jdbcType=DECIMAL},
                </if>
                <if test="item.totalTaxPrice != null">
                    #{item.totalTaxPrice,jdbcType=DECIMAL},
                </if>
                <if test="item.amountStandardMoney != null">
                    #{item.amountStandardMoney,jdbcType=DECIMAL},
                </if>
                <if test="item.taxStandardMoney != null">
                    #{item.taxStandardMoney,jdbcType=DECIMAL},
                </if>
                <if test="item.totalTaxPriceStandardMoney != null">
                    #{item.totalTaxPriceStandardMoney,jdbcType=DECIMAL},
                </if>
                <if test="item.amountTotal != null">
                    #{item.amountTotal,jdbcType=DECIMAL},
                </if>
                <if test="item.baseCurrencyId != null">
                    #{item.baseCurrencyId,jdbcType=DECIMAL},
                </if>
                <if test="item.receiver != null">
                    #{item.receiver,jdbcType=VARCHAR},
                </if>
                <if test="item.memberId != null">
                    #{item.memberId,jdbcType=DECIMAL},
                </if>
                <if test="item.isFromOms != null">
                    #{item.isFromOms,jdbcType=VARCHAR},
                </if>
                <if test="item.payableAmount != null">
                    #{item.payableAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.paySettleMethodId != null">
                    #{item.paySettleMethodId,jdbcType=INTEGER},
                </if>
                <if test="item.wmsBillNo != null">
                    #{item.wmsBillNo,jdbcType=VARCHAR},
                </if>
                <if test="item.isPushSap != null">
                    #{item.isPushSap,jdbcType=VARCHAR},
                </if>
                <if test="item.orderType != null">
                    #{item.orderType,jdbcType=VARCHAR},
                </if>
                <if test="item.omsSynOrderStatus != null">
                    #{item.omsSynOrderStatus,jdbcType=INTEGER},
                </if>
                <if test="item.omsSynOrderCount != null">
                    #{item.omsSynOrderCount,jdbcType=INTEGER},
                </if>
                <if test="item.omsSynExpStatus != null">
                    #{item.omsSynExpStatus,jdbcType=INTEGER},
                </if>
                <if test="item.omsSynExpCount != null">
                    #{item.omsSynExpCount,jdbcType=INTEGER},
                </if>
                <if test="item.supportCashOnDelivery != null">
                    #{item.supportCashOnDelivery,jdbcType=INTEGER},
                </if>
                <if test="item.preSaleOrderBill != null">
                    #{item.preSaleOrderBill,jdbcType=INTEGER},
                </if>
                <if test="item.goodsConcession != null">
                    #{item.goodsConcession,jdbcType=DECIMAL},
                </if>
                <if test="item.otherConcession != null">
                    #{item.otherConcession,jdbcType=DECIMAL},
                </if>
                <if test="item.distributionfeeAmount != null">
                    #{item.distributionfeeAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.cashCouponAmount != null">
                    #{item.cashCouponAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.couponAmount != null">
                    #{item.couponAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.isConfirm != null">
                    #{item.isConfirm,jdbcType=INTEGER},
                </if>
                <if test="item.couponsInfo != null">
                    #{item.couponsInfo,jdbcType=VARCHAR},
                </if>
                <if test="item.salesPromotion != null">
                    #{item.salesPromotion,jdbcType=VARCHAR},
                </if>
                <if test="item.originalRetailBillNo != null">
                    #{item.originalRetailBillNo,jdbcType=VARCHAR},
                </if>
                <if test="item.exemptAuditFlag != null">
                    #{item.exemptAuditFlag,jdbcType=VARCHAR},
                </if>
                <if test="item.billDate != null">
                    #{item.billDate,jdbcType=TIMESTAMP},
                </if>
            </trim>
        </foreach>
    </insert>
    <update id="updateByPrimaryKeySelective"
            parameterType="java.util.List">
        <foreach item="item" index="index" collection="list" separator=";">
            update ord_retail_order_bill
            <set>
                <if test="item.payState != null">
                    pay_state = #{item.payState,jdbcType=INTEGER},
                </if>
                <if test="item.customerId != null">
                    customer_id = #{item.customerId,jdbcType=VARCHAR},
                </if>
                <if test="item.channelId != null">
                    channel_id = #{item.channelId,jdbcType=DECIMAL},
                </if>
                <if test="item.amountTag != null">
                    amount_tag = #{item.amountTag,jdbcType=DECIMAL},
                </if>
                <if test="item.remarks != null">
                    remarks = #{item.remarks,jdbcType=VARCHAR},
                </if>
                <if test="item.currencyTypeId != null">
                    currency_type_id =
                    #{item.currencyTypeId,jdbcType=DECIMAL},
                </if>
                <if test="item.status != null">
                    status = #{item.status,jdbcType=INTEGER},
                </if>
                <if test="item.qty != null">
                    qty = #{item.qty,jdbcType=DECIMAL},
                </if>
                <if test="item.submitBy != null">
                    submit_by = #{item.submitBy,jdbcType=VARCHAR},
                </if>
                <if test="item.canalId != null">
                    canal_id = #{item.canalId,jdbcType=DECIMAL},
                </if>
                <if test="item.memberName != null">
                    member_name = #{item.memberName,jdbcType=VARCHAR},
                </if>
                <if test="item.platformId != null">
                    platform_id = #{item.platformId,jdbcType=DECIMAL},
                </if>
                <if test="item.warehouseId != null">
                    warehouse_id = #{item.warehouseId,jdbcType=DECIMAL},
                </if>
                <if test="item.virtualWareHouseCodes != null">
                    virtual_warehouse_codes = #{item.virtualWareHouseCodes,jdbcType=VARCHAR},
                </if>
                <if test="item.createDate != null">
                    create_date = #{item.createDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.amountPaid != null">
                    amount_paid = #{item.amountPaid,jdbcType=DECIMAL},
                </if>
                <if test="item.confirmDate != null">
                    confirm_date = #{item.confirmDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.shopId != null">
                    shop_id = #{item.shopId,jdbcType=DECIMAL},
                </if>
                <if test="item.discount != null">
                    discount = #{item.discount,jdbcType=DECIMAL},
                </if>
                <if test="item.vipCardNo != null">
                    vip_card_no = #{item.vipCardNo,jdbcType=VARCHAR},
                </if>
                <if test="item.brandId != null">
                    brand_id = #{item.brandId,jdbcType=DECIMAL},
                </if>
                <if test="item.stockChannelId != null">
                    stock_channel_id =
                    #{item.stockChannelId,jdbcType=DECIMAL},
                </if>
                <if test="item.amountGoods != null">
                    amount_goods = #{item.amountGoods,jdbcType=DECIMAL},
                </if>
                <if test="item.modifyDate != null">
                    modify_date = #{item.modifyDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.distributionState != null">
                    distribution_state =
                    #{item.distributionState,jdbcType=VARCHAR},
                </if>
                <if test="item.settleChannelId != null">
                    settle_channel_id =
                    #{item.settleChannelId,jdbcType=DECIMAL},
                </if>
                <if test="item.completeDate != null">
                    complete_date = #{item.completeDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.abolishDate != null">
                    abolish_date = #{item.abolishDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.confirmBy != null">
                    confirm_by = #{item.confirmBy,jdbcType=VARCHAR},
                </if>
                <if test="item.sourceBillNo != null">
                    source_bill_no = #{item.sourceBillNo,jdbcType=VARCHAR},
                </if>
                <if test="item.submitDate != null">
                    submit_date = #{item.submitDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.abolishBy != null">
                    abolish_by = #{item.abolishBy,jdbcType=VARCHAR},
                </if>
                <if test="item.businessDate != null">
                    business_date = #{item.businessDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.modifyBy != null">
                    modify_by = #{item.modifyBy,jdbcType=VARCHAR},
                </if>
                <if test="item.expressFee != null">
                    express_fee = #{item.expressFee,jdbcType=DECIMAL},
                </if>
                <if test="item.createBy != null">
                    create_by = #{item.createBy,jdbcType=VARCHAR},
                </if>
                <if test="item.completeBy != null">
                    complete_by = #{item.completeBy,jdbcType=VARCHAR},
                </if>
                <if test="item.whareatypeId != null">
                    whareatype_id = #{item.whareatypeId,jdbcType=DECIMAL},
                </if>
                <if test="item.deliveryType != null">
                    delivery_type = #{item.deliveryType,jdbcType=VARCHAR},
                </if>
                <if test="item.exchangeratetype != null">
                    exchange_rate_type =
                    #{item.exchangeratetype,jdbcType=VARCHAR},
                </if>
                <if test="item.exchangerate != null">
                    exchange_rate = #{item.exchangerate,jdbcType=DECIMAL},
                </if>
                <if test="item.tax != null">
                    tax = #{item.tax,jdbcType=DECIMAL},
                </if>
                <if test="item.totalTaxPrice != null">
                    total_tax_price =
                    #{item.totalTaxPrice,jdbcType=DECIMAL},
                </if>
                <if test="item.amountStandardMoney != null">
                    amount_standard_money =
                    #{item.amountStandardMoney,jdbcType=DECIMAL},
                </if>
                <if test="item.taxStandardMoney != null">
                    tax_standard_money =
                    #{item.taxStandardMoney,jdbcType=DECIMAL},
                </if>
                <if test="item.totalTaxPriceStandardMoney != null">
                    total_tax_price_standard_money =
                    #{item.totalTaxPriceStandardMoney,jdbcType=DECIMAL},
                </if>
                <if test="item.amountTotal != null">
                    amount_total = #{item.amountTotal,jdbcType=DECIMAL},
                </if>
                <if test="item.baseCurrencyId != null">
                    base_currency_id =
                    #{item.baseCurrencyId,jdbcType=DECIMAL},
                </if>
                <if test="item.receiver != null">
                    receiver = #{item.receiver,jdbcType=VARCHAR},
                </if>
                <if test="item.memberId != null">
                    member_id = #{item.memberId,jdbcType=DECIMAL},
                </if>
                <if test="item.isFromOms != null">
                    is_from_oms = #{item.isFromOms,jdbcType=VARCHAR},
                </if>
                <if test="item.payableAmount != null">
                    payable_amount = #{item.payableAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.paySettleMethodId != null">
                    pay_settle_method_id =
                    #{item.paySettleMethodId,jdbcType=INTEGER},
                </if>
                <if test="item.wmsBillNo != null">
                    wms_bill_no = #{item.wmsBillNo,jdbcType=VARCHAR},
                </if>
                <if test="item.isPushSap != null">
                    is_push_sap = #{item.isPushSap,jdbcType=VARCHAR},
                </if>
                <if test="item.orderType != null">
                    order_type = #{item.orderType,jdbcType=VARCHAR},
                </if>
                <if test="item.omsSynOrderStatus != null">
                    oms_syn_order_status =
                    #{item.omsSynOrderStatus,jdbcType=INTEGER},
                </if>
                <if test="item.omsSynOrderCount != null">
                    oms_syn_order_count =
                    #{item.omsSynOrderCount,jdbcType=INTEGER},
                </if>
                <if test="item.omsSynExpStatus != null">
                    oms_syn_exp_status =
                    #{item.omsSynExpStatus,jdbcType=INTEGER},
                </if>
                <if test="item.omsSynExpCount != null">
                    oms_syn_exp_count =
                    #{item.omsSynExpCount,jdbcType=INTEGER},
                </if>
                <if test="item.supportCashOnDelivery != null">
                    support_cash_on_delivery =
                    #{item.supportCashOnDelivery,jdbcType=INTEGER},
                </if>
                <if test="item.preSaleOrderBill != null">
                    pre_sale_order_bill =
                    #{item.preSaleOrderBill,jdbcType=INTEGER},
                </if>
                <if test="item.isConfirm != null">
                    is_confirm =
                    #{item.isConfirm,jdbcType=INTEGER},
                </if>
                <if test="item.goodsConcession != null">
                   goods_concession = #{item.goodsConcession,jdbcType=DECIMAL},
                </if>
                <if test="item.otherConcession != null">
                   other_concession = #{item.otherConcession,jdbcType=DECIMAL},
                </if>
                <if test="item.distributionfeeAmount != null">
                   distribution_fee_amount = #{item.distributionfeeAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.cashCouponAmount != null">
                   cash_coupon_amount = #{item.cashCouponAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.couponAmount != null">
                   coupon_amount = #{item.couponAmount,jdbcType=DECIMAL},
                </if>
                <if test="item.couponsInfo != null">
                    coupons_info = #{item.couponsInfo,jdbcType=VARCHAR},
                </if>
                <if test="item.salesPromotion != null">
                    sales_promotion = #{item.salesPromotion,jdbcType=VARCHAR},
                </if>
                <if test="item.wmsDate != null">
                    wms_date = #{item.wmsDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.exemptAuditDelayTime != null">
                    exempt_audit_delay_time = #{item.exemptAuditDelayTime,jdbcType=TIMESTAMP},
                </if>
                <if test="item.exemptAuditFlag != null">
                    exempt_audit_flag = #{item.exemptAuditFlag,jdbcType=VARCHAR},
                </if>

            </set>
            where id = #{item.id,jdbcType=VARCHAR}
            <if test="item.billNo != null">
                and bill_no = #{item.billNo}
            </if>
        </foreach>
    </update>
    <update id="updateByPrimaryKey"
            parameterType="com.baison.e3plus.basebiz.order.api.model.RetailOrderBill">
		update ord_retail_order_bill
		set pay_state =
		#{payState,jdbcType=INTEGER},
		customer_id =
		#{customerId,jdbcType=VARCHAR},
		channel_id =
		#{channelId,jdbcType=DECIMAL},
		amount_tag =
		#{amountTag,jdbcType=DECIMAL},
		remarks = #{remarks,jdbcType=VARCHAR},
		currency_type_id = #{currencyTypeId,jdbcType=DECIMAL},
		status =
		#{status,jdbcType=INTEGER},
		qty = #{qty,jdbcType=DECIMAL},
		submit_by =
		#{submitBy,jdbcType=VARCHAR},
		canal_id = #{canalId,jdbcType=DECIMAL},
		member_name = #{memberName,jdbcType=VARCHAR},
		platform_id =
		#{platformId,jdbcType=DECIMAL},
		warehouse_id =
		#{warehouseId,jdbcType=DECIMAL},
        virtual_warehouse_codes = #{item.virtualWareHouseCodes,jdbcType=VARCHAR},
		create_date =
		#{createDate,jdbcType=TIMESTAMP},
		amount_paid =
		#{amountPaid,jdbcType=DECIMAL},
		confirm_date =
		#{confirmDate,jdbcType=TIMESTAMP},
		shop_id =
		#{shopId,jdbcType=DECIMAL},
		discount = #{discount,jdbcType=DECIMAL},
		vip_card_no = #{vipCardNo,jdbcType=VARCHAR},
		bill_no =
		#{billNo,jdbcType=VARCHAR},
		brand_id = #{brandId,jdbcType=DECIMAL},
		stock_channel_id = #{stockChannelId,jdbcType=DECIMAL},
		amount_goods =
		#{amountGoods,jdbcType=DECIMAL},
		modify_date =
		#{modifyDate,jdbcType=TIMESTAMP},
		distribution_state =
		#{distributionState,jdbcType=VARCHAR},
		settle_channel_id =
		#{settleChannelId,jdbcType=DECIMAL},
		complete_date =
		#{completeDate,jdbcType=TIMESTAMP},
		abolish_date =
		#{abolishDate,jdbcType=TIMESTAMP},
		confirm_by =
		#{confirmBy,jdbcType=VARCHAR},
		source_bill_no =
		#{sourceBillNo,jdbcType=VARCHAR},
		submit_date =
		#{submitDate,jdbcType=TIMESTAMP},
		abolish_by =
		#{abolishBy,jdbcType=VARCHAR},
		business_date =
		#{businessDate,jdbcType=TIMESTAMP},
		modify_by =
		#{modifyBy,jdbcType=VARCHAR},
		express_fee =
		#{expressFee,jdbcType=DECIMAL},
		create_by =
		#{createBy,jdbcType=VARCHAR},
		complete_by =
		#{completeBy,jdbcType=VARCHAR},
		whareatype_id =
		#{whareatypeId,jdbcType=DECIMAL},
		delivery_type =
		#{deliveryType,jdbcType=VARCHAR},
		exchange_rate_type =
		#{exchangeratetype,jdbcType=VARCHAR},
		exchange_rate =
		#{exchangerate,jdbcType=DECIMAL},
		tax = #{tax,jdbcType=DECIMAL},
		total_tax_price = #{totalTaxPrice,jdbcType=DECIMAL},
		amount_standard_money = #{amountStandardMoney,jdbcType=DECIMAL},
		tax_standard_money = #{taxStandardMoney,jdbcType=DECIMAL},
		total_tax_price_standard_money =
		#{totalTaxPriceStandardMoney,jdbcType=DECIMAL},
		amount_total =
		#{amountTotal,jdbcType=DECIMAL},
		base_currency_id =
		#{baseCurrencyId,jdbcType=DECIMAL},
		receiver =
		#{receiver,jdbcType=VARCHAR},
		member_id = #{memberId,jdbcType=DECIMAL},
		is_from_oms =
		#{isFromOms,jdbcType=VARCHAR},
		payable_amount =
		#{payableAmount,jdbcType=DECIMAL},
		pay_settle_method_id =
		#{paySettleMethodId,jdbcType=INTEGER},
		wms_bill_no =
		#{wmsBillNo,jdbcType=VARCHAR},
		is_push_sap =
		#{isPushSap,jdbcType=VARCHAR},
		order_type =
		#{orderType,jdbcType=VARCHAR},
		oms_syn_order_status =
		#{omsSynOrderStatus,jdbcType=INTEGER},
		oms_syn_order_count =
		#{omsSynOrderCount,jdbcType=INTEGER},
		oms_syn_exp_status =
		#{omsSynExpStatus,jdbcType=INTEGER},
		oms_syn_exp_count =
		#{omsSynExpCount,jdbcType=INTEGER},
		support_cash_on_delivery =
		#{supportCashOnDelivery,jdbcType=INTEGER},
		pre_sale_order_bill =
		#{preSaleOrderBill,jdbcType=INTEGER},
		
        goods_concession = #{goodsConcession,jdbcType=DECIMAL},
        other_concession = #{otherConcession,jdbcType=DECIMAL},
        distribution_fee_amount = #{distributionfeeAmount,jdbcType=DECIMAL},
        cash_coupon_amount = #{cashCouponAmount,jdbcType=DECIMAL},
        coupon_amount = #{couponAmount,jdbcType=DECIMAL}

        coupons_info = #{couponsInfo,jdbcType=VARCHAR},
        sales_promotion = #{salesPromotion,jdbcType=VARCHAR}
		
		where id = #{id,jdbcType=BIGINT}
	</update>

    <select id="getSetMealRetailOrderGoodsCount"
            resultType="java.lang.Long" parameterType="java.lang.String">
        select count(0)
        from
        ord_retail_ord_goods_detail
        detail left join
        ord_retail_order_bill bill
        on bill.bill_no =
        detail.bill_no
        <where>
            <if test="status != null">
                bill.status = #{status}
            </if>
            <choose>
                <when test="setMealSpecs != null and setMealSpecs.length > 0">
                    and
                    detail.set_meal_spec in
                    <foreach collection="setMealSpecs" item="setMealSpec"
                             index="index" separator="," open="(" close=")">
                        #{setMealSpec}
                    </foreach>
                </when>
                <otherwise>
                    and detail.set_meal_spec is not null
                </otherwise>
            </choose>
        </where>
    </select>

    <select id="queryPage" parameterType="Map"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from
          ord_retail_order_bill bill
        <where>
            <if test="id !=null">
                id=#{id}
            </if>
            <if test="submitDate != null">
                and <![CDATA[ submit_date <= #{submitDate}]]> and submit_date is not null
            </if>
            <if test="sourceBillNo != null">
                and source_bill_no=#{sourceBillNo}
            </if>
            <if test="payState != null">
                and pay_state = #{payState}
            </if>
            <if test="customerId != null">
                and customer_id in
                <foreach collection="customerId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="channelId != null">
                and channel_id in
                <foreach collection="channelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="currencyTypeId != null">
                and currency_type_id = #{currencyTypeId}
            </if>
            <if test="status != null">
                and status in 
                <foreach collection="status" open="(" close=")" item="item" separator=",">
                #{item}
                </foreach>
            </if>
            <if test="platformId != null">
                and platform_id in
                <foreach collection="platformId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="warehouseId != null">
                and warehouse_id in
                <foreach collection="warehouseId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="virtualWareHouseCodes != null">
                and virtual_warehouse_codes = #{virtualWareHouseCodes}
            </if>
            <if test="shopId != null">
                and shop_id in
                <foreach collection="shopId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="shopIdNot != null">
                and shop_id not in
                <foreach collection="shopIdNot" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="vipCardNo != null">
                and vip_card_no = #{vipCardNo}
            </if>
            <if test="billNo != null">
                and bill_no like #{billNo}
            </if>
            <if test="brandId != null">
                and brand_id in
                <foreach collection="brandId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="stockChannelId != null">
                and stock_channel_id in
                <foreach collection="stockChannelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="distributionState != null">
                and distribution_state in
                <foreach collection="distributionState" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="settleChannelId != null">
                and settle_channel_id in
                <foreach collection="settleChannelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="whareatypeId != null">
                and whareatype_id = #{whareatypeId}
            </if>
            <if test="deliveryType != null">
                and delivery_type = #{deliveryType}
            </if>
            <if test="baseCurrencyId != null">
                and base_currency_id in
                <foreach collection="baseCurrencyId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="receiver != null">
                and receiver = #{receiver}
            </if>
            <if test="memberId != null">
                and member_id = #{memberId}
            </if>
            <if test="memberName != null">
                and member_name = #{memberName}
            </if>
            <if test="isFromOms != null">
                and is_from_oms = #{isFromOms}
            </if>
            <if test="paySettleMethodId != null">
                and pay_settle_method_id = #{paySettleMethodId}
            </if>
            <if test="wmsBillNo != null">
                and wms_bill_no = #{wmsBillNo}
            </if>
            <if test="isPushSap != null">
                and is_push_sap = #{isPushSap}
            </if>
            <if test="orderType != null">
                and order_type = #{orderType}
            </if>
            <if test="omsSynOrderStatus != null">
                and oms_syn_order_status = #{omsSynOrderStatus}
            </if>
            <if test="omsSynExpStatus != null">
                and oms_syn_exp_status = #{omsSynExpStatus}
            </if>

            <if test="businessdate_start != null">
                and business_date &gt;= #{businessdate_start}
            </if>
            <if test="businessdate_end != null">
                and business_date &lt;= #{businessdate_end}
            </if>
            <if test="createdate_start != null">
                and create_date &gt;= #{createdate_start}
            </if>
            <if test="createdate_end != null">
                and create_date &lt;= #{createdate_end}
            </if>
            <if test="completedate_start != null">
                and complete_date &gt;= #{completedate_start}
            </if>
            <if test="completedate_end != null">
                and complete_date &lt;= #{completedate_end}
            </if>
            <if test="isConfirm !=null" >
                <if test="isConfirm == '' " >
                    and is_confirm is null
                </if>
                <if test="isConfirm != '' " >
                    and is_confirm=#{isConfirm}
                </if>
            </if>
        </where>
        <if test="stratRow != null and endRow != null">
            limit #{stratRow},#{endRow}
        </if>
    </select>


    <select id="getListCount" parameterType="java.util.HashMap"
            resultType="java.lang.Long">
        select count(0) from
        ord_retail_order_bill bill
        <where>
            <if test="id !=null">
                id=#{id}
            </if>
            <if test="sourceBillNo != null">
                and source_bill_no=#{sourceBillNo}
            </if>
            <if test="payState != null">
                and pay_state = #{payState}
            </if>
            <if test="customerId != null">
                and customer_id in
                <foreach collection="customerId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="channelId != null">
                and channel_id in
                <foreach collection="channelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="currencyTypeId != null">
                and currency_type_id = #{currencyTypeId}
            </if>
            <if test="status != null">
                and status in
                <foreach collection="status" open="(" close=")" item="item" separator=",">
                    #{item}
                </foreach>
            </if>
            <if test="platformId != null">
                and platform_id in
                <foreach collection="platformId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="warehouseId != null">
                and warehouse_id in
                <foreach collection="warehouseId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="virtualWareHouseCodes != null">
                and virtual_warehouse_codes = #{virtualWareHouseCodes}
            </if>
            <if test="shopId != null">
                and shop_id in
                <foreach collection="shopId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="vipCardNo != null">
                and vip_card_no = #{vipCardNo}
            </if>
            <if test="billNo != null">
                and bill_no = #{billNo}
            </if>
            <if test="brandId != null">
                and brand_id in
                <foreach collection="brandId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="stockChannelId != null">
                and stock_channel_id in
                <foreach collection="stockChannelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="distributionState != null">
                and distribution_state = #{distributionState}
            </if>
            <if test="settleChannelId != null">
                and settle_channel_id in
                <foreach collection="settleChannelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="whareatypeId != null">
                and whareatype_id = #{whareatypeId}
            </if>
            <if test="deliveryType != null">
                and delivery_type = #{deliveryType}
            </if>
            <if test="baseCurrencyId != null">
                and base_currency_id in
                <foreach collection="baseCurrencyId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="receiver != null">
                and receiver = #{receiver}
            </if>
            <if test="memberId != null">
                and member_id = #{memberId}
            </if>
            <if test="memberName != null">
                and member_name = #{memberName}
            </if>
            <if test="isFromOms != null">
                and is_from_oms = #{isFromOms}
            </if>
            <if test="paySettleMethodId != null">
                and pay_settle_method_id = #{paySettleMethodId}
            </if>
            <if test="wmsBillNo != null">
                and wms_bill_no = #{wmsBillNo}
            </if>
            <if test="isPushSap != null">
                and is_push_sap = #{isPushSap}
            </if>
            <if test="orderType != null">
                and order_type = #{orderType}
            </if>
            <if test="omsSynOrderStatus != null">
                and oms_syn_order_status = #{omsSynOrderStatus}
            </if>
            <if test="omsSynExpStatus != null">
                and oms_syn_exp_status = #{omsSynExpStatus}
            </if>

            <if test="businessdate_start != null">
                and business_date &gt;= #{businessdate_start}
            </if>
            <if test="businessdate_end != null">
                and business_date &lt;= #{businessdate_end}
            </if>
            <if test="createdate_start != null">
                and create_date &gt;= #{createdate_start}
            </if>
            <if test="createdate_end != null">
                and create_date &lt;= #{createdate_end}
            </if>
            <if test="completedate_start != null">
                and complete_date &gt;= #{completedate_start}
            </if>
            <if test="completedate_end != null">
                and complete_date &lt;= #{completedate_end}
            </if>
            <if test="isConfirm !=null" >
                <if test="isConfirm == '' " >
                    and is_confirm is null
                </if>
                <if test="isConfirm != '' " >
                    and is_confirm=#{isConfirm}
                </if>
            </if>
        </where>
    </select>

    <select id="queryPageBySetMealRetailOrderGoods"
            resultMap="SetMealRetailOrderGoodsResultMap"
            parameterType="java.lang.String">
        select bill.id,bill.bill_no,bill.source_bill_no,detail.set_meal_spec
        from
        ord_retail_order_bill bill left join ord_retail_ord_goods_detail
        detail
        on bill.bill_no =
        detail.bill_no
        <where>
            <if test="status != null">
                bill.status = #{status}
            </if>
            <choose>
                <when test="setMealSpecs != null and setMealSpecs.length > 0">
                    and
                    detail.set_meal_spec in
                    <foreach collection="setMealSpecs" item="setMealSpec"
                             index="index" separator="," open="(" close=")">
                        #{setMealSpec}
                    </foreach>
                </when>
                <otherwise>
                    and detail.set_meal_spec is not null
                </otherwise>
            </choose>
        </where>
    </select>
    <insert id="batchInsertSelective" parameterType="java.util.List">
        <foreach item="item" index="index" collection="list">
            insert into ord_retail_order_bill
            <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="item.id != null">
                    id,
                </if>
                <if test="item.payState != null">
                    pay_state,
                </if>
                <if test="item.customerId != null">
                    customer_id,
                </if>
                <if test="item.billDate != null">
                    bill_date,
                </if>
                <if test="item.channelId != null">
                    channel_id,
                </if>
                <if test="item.amountTag != null">
                    amount_tag,
                </if>
                <if test="item.remarks != null">
                    remarks,
                </if>
                <if test="item.currencyTypeId != null">
                    currency_type_id,
                </if>
                <if test="item.status != null">
                    status,
                </if>
                <if test="item.qty != null">
                    qty,
                </if>
                <if test="item.submitBy != null">
                    submit_by,
                </if>
                <if test="item.canalId != null">
                    canal_id,
                </if>
                <if test="item.memberName != null">
                    member_name,
                </if>
                <if test="item.platformId != null">
                    platform_id,
                </if>
                <if test="item.warehouseId != null">
                    warehouse_id,
                </if>
                <if test="item.virtualWareHouseCodes != null">
                    virtual_warehouse_codes,
                </if>
                <if test="item.createDate != null">
                    create_date,
                </if>
                <if test="item.amountPaid != null">
                    amount_paid,
                </if>
                <if test="item.confirmDate != null">
                    confirm_date,
                </if>
                <if test="item.shopId != null">
                    shop_id,
                </if>
                <if test="item.discount != null">
                    discount,
                </if>
                <if test="item.vipCardNo != null">
                    vip_card_no,
                </if>
                <if test="item.billNo != null">
                    bill_no,
                </if>
                <if test="item.brandId != null">
                    brand_id,
                </if>
                <if test="item.stockChannelId != null">
                    stock_channel_id,
                </if>
                <if test="item.amountGoods != null">
                    amount_goods,
                </if>
                <if test="item.modifyDate != null">
                    modify_date,
                </if>
                <if test="item.distributionState != null">
                    distribution_state,
                </if>
                <if test="item.settleChannelId != null">
                    settle_channel_id,
                </if>
                <if test="item.completeDate != null">
                    complete_date,
                </if>
                <if test="item.abolishDate != null">
                    abolish_date,
                </if>
                <if test="item.confirmBy != null">
                    confirm_by,
                </if>
                <if test="item.sourceBillNo != null">
                    source_bill_no,
                </if>
                <if test="item.submitDate != null">
                    submit_date,
                </if>
                <if test="item.abolishBy != null">
                    abolish_by,
                </if>
                <if test="item.businessDate != null">
                    business_date,
                </if>
                <if test="item.modifyBy != null">
                    modify_by,
                </if>
                <if test="item.expressFee != null">
                    express_fee,
                </if>
                <if test="item.createBy != null">
                    create_by,
                </if>
                <if test="item.completeBy != null">
                    complete_by,
                </if>
                <if test="item.whareatypeId != null">
                    whareatype_id,
                </if>
                <if test="item.deliveryType != null">
                    delivery_type,
                </if>
                <if test="item.exchangeratetype != null">
                    exchange_rate_type,
                </if>
                <if test="item.exchangerate != null">
                    exchange_rate,
                </if>
                <if test="item.tax != null">
                    tax,
                </if>
                <if test="item.totalTaxPrice != null">
                    total_tax_price,
                </if>
                <if test="item.amountStandardMoney != null">
                    amount_standard_money,
                </if>
                <if test="item.taxStandardMoney != null">
                    tax_standard_money,
                </if>
                <if test="item.totalTaxPriceStandardMoney != null">
                    total_tax_price_standard_money,
                </if>
                <if test="item.amountTotal != null">
                    amount_total,
                </if>
                <if test="item.baseCurrencyId != null">
                    base_currency_id,
                </if>
                <if test="item.receiver != null">
                    receiver,
                </if>
                <if test="item.memberId != null">
                    member_id,
                </if>
                <if test="item.isFromOms != null">
                    is_from_oms,
                </if>
                <if test="item.payableAmount != null">
                    payable_amount,
                </if>
                <if test="item.paySettleMethodId != null">
                    pay_settle_method_id,
                </if>
                <if test="item.wmsBillNo != null">
                    wms_bill_no,
                </if>
                <if test="item.isPushSap != null">
                    is_push_sap,
                </if>
                <if test="item.orderType != null">
                    order_type,
                </if>
                <if test="item.omsSynOrderStatus != null">
                    oms_syn_order_status,
                </if>
                <if test="item.omsSynOrderCount != null">
                    oms_syn_order_count,
                </if>
                <if test="item.omsSynExpStatus != null">
                    oms_syn_exp_status,
                </if>
                <if test="item.omsSynExpCount != null">
                    oms_syn_exp_count,
                </if>
                <if test="supportCashOnDelivery != null">
                    support_cash_on_delivery,
                </if>
                <if test="item.preSaleOrderBill != null">
                    pre_sale_order_bill,
                </if>
                <if test="item.goodsConcession != null">
                    goods_concession,
                </if>
                <if test="item.otherConcession != null">
                    other_concession,
                </if>
                <if test="item.distributionfeeAmount != null">
                    distribution_fee_amount,
                </if>
                <if test="item.cashCouponAmount != null">
                    cash_coupon_amount,
                </if>
                <if test="item.couponAmount != null">
                    coupon_amount,
                </if>
            </trim>
            <trim prefix="values (" suffix=")" suffixOverrides=",">
                <if test="item.id != null">
                    #{id, jdbcType=BIGINT}
                </if>
                <if test="item.payState != null">
                    #{pay_state, jdbcType=INTEGER}
                </if>
                <if test="item.customerId != null">
                    #{customer_id, jdbcType=INT}
                </if>
                <if test="item.billDate != null">
                    #{bill_date, jdbcType=DATETIME}
                </if>
                <if test="item.channelId != null">
                    #{channel_id, jdbcType=INT}
                </if>
                <if test="item.amountTag != null">
                    #{amount_tag, jdbcType=DECIMAL}
                </if>
                <if test="item.remarks != null">
                    #{remarks, jdbcType=VARCHAR}
                </if>
                <if test="item.currencyTypeId != null">
                    #{currency_type_id, jdbcType=INT}
                </if>
                <if test="item.status != null">
                    #{status, jdbcType=INTEGER}
                </if>
                <if test="item.qty != null">
                    #{qty, jdbcType=DECIMAL}
                </if>
                <if test="item.submitBy != null">
                    #{submit_by, jdbcType=VARCHAR}
                </if>
                <if test="item.canalId != null">
                    #{canal_id, jdbcType=INT}
                </if>
                <if test="item.memberName != null">
                    #{member_name, jdbcType=VARCHAR}
                </if>
                <if test="item.platformId != null">
                    #{platform_id, jdbcType=INT}
                </if>
                <if test="item.warehouseId != null">
                    #{warehouse_id, jdbcType=INT}
                </if>
                <if test="item.virtualWareHouseCodes != null">
                    #{virtual_warehouse_codes, jdbcType=VARCHAR}
                </if>
                <if test="item.createDate != null">
                    #{create_date, jdbcType=DATETIME}
                </if>
                <if test="item.amountPaid != null">
                    #{amount_paid, jdbcType=DECIMAL}
                </if>
                <if test="item.confirmDate != null">
                    #{confirm_date, jdbcType=DATETIME}
                </if>
                <if test="item.shopId != null">
                    #{shop_id, jdbcType=INT}
                </if>
                <if test="item.discount != null">
                    #{discount, jdbcType=DECIMAL}
                </if>
                <if test="item.vipCardNo != null">
                    #{vip_card_no, jdbcType=VARCHAR}
                </if>
                <if test="item.billNo != null">
                    #{bill_no, jdbcType=VARCHAR}
                </if>
                <if test="item.brandId != null">
                    #{brand_id, jdbcType=INT}
                </if>
                <if test="item.stockChannelId != null">
                    #{stock_channel_id, jdbcType=INT}
                </if>
                <if test="item.amountGoods != null">
                    #{amount_goods, jdbcType=DECIMAL}
                </if>
                <if test="item.modifyDate != null">
                    #{modify_date, jdbcType=DATETIME}
                </if>
                <if test="item.distributionState != null">
                    #{distribution_state, jdbcType=VARCHAR}
                </if>
                <if test="item.settleChannelId != null">
                    #{settle_channel_id, jdbcType=INT}
                </if>
                <if test="item.completeDate != null">
                    #{complete_date, jdbcType=DATETIME}
                </if>
                <if test="item.abolishDate != null">
                    #{abolish_date, jdbcType=DATETIME}
                </if>
                <if test="item.confirmBy != null">
                    #{confirm_by, jdbcType=VARCHAR}
                </if>
                <if test="item.sourceBillNo != null">
                    #{source_bill_no, jdbcType=VARCHAR}
                </if>
                <if test="item.submitDate != null">
                    #{submit_date, jdbcType=DATETIME}
                </if>
                <if test="item.abolishBy != null">
                    #{abolish_by, jdbcType=VARCHAR}
                </if>
                <if test="item.businessDate != null">
                    #{business_date, jdbcType=DATETIME}
                </if>
                <if test="item.modifyBy != null">
                    #{modify_by, jdbcType=VARCHAR}
                </if>
                <if test="item.expressFee != null">
                    #{express_fee, jdbcType=DECIMAL}
                </if>
                <if test="item.createBy != null">
                    #{create_by, jdbcType=VARCHAR}
                </if>
                <if test="item.completeBy != null">
                    #{complete_by, jdbcType=VARCHAR}
                </if>
                <if test="item.whareatypeId != null">
                    #{whareatype_id, jdbcType=DECIMAL}
                </if>
                <if test="item.deliveryType != null">
                    #{delivery_type, jdbcType=VARCHAR}
                </if>
                <if test="item.exchangeratetype != null">
                    #{exchange_rate_type, jdbcType=VARCHAR}
                </if>
                <if test="item.exchangerate != null">
                    #{exchange_rate, jdbcType=DECIMAL}
                </if>
                <if test="item.tax != null">
                    #{tax, jdbcType=DECIMAL}
                </if>
                <if test="item.totalTaxPrice != null">
                    #{total_tax_price, jdbcType=DECIMAL}
                </if>
                <if test="item.amountStandardMoney != null">
                    #{amount_standard_money, jdbcType=DECIMAL}
                </if>
                <if test="item.taxStandardMoney != null">
                    #{tax_standard_money, jdbcType=DECIMAL}
                </if>
                <if test="item.totalTaxPriceStandardMoney != null">
                    #{total_tax_price_standard_money, jdbcType=DECIMAL}
                </if>
                <if test="item.amountTotal != null">
                    #{amount_total, jdbcType=DECIMAL}
                </if>
                <if test="item.baseCurrencyId != null">
                    #{base_currency_id, jdbcType=DECIMAL}
                </if>
                <if test="item.receiver != null">
                    #{receiver, jdbcType=VARCHAR}
                </if>
                <if test="item.memberId != null">
                    #{member_id, jdbcType=INT}
                </if>
                <if test="item.isFromOms != null">
                    #{is_from_oms, jdbcType=VARCHAR}
                </if>
                <if test="item.payableAmount != null">
                    #{payable_amount, jdbcType=DECIMAL}
                </if>
                <if test="item.paySettleMethodId != null">
                    #{pay_settle_method_id, jdbcType=INT}
                </if>
                <if test="item.wmsBillNo != null">
                    #{wms_bill_no, jdbcType=VARCHAR}
                </if>
                <if test="item.isPushSap != null">
                    #{is_push_sap, jdbcType=VARCHAR}
                </if>
                <if test="item.orderType != null">
                    #{order_type, jdbcType=VARCHAR}
                </if>
                <if test="item.omsSynOrderStatus != null">
                    #{oms_syn_order_status, jdbcType=INTEGER}
                </if>
                <if test="item.omsSynOrderCount != null">
                    #{oms_syn_order_count, jdbcType=INT}
                </if>
                <if test="item.omsSynExpStatus != null">
                    #{oms_syn_exp_status, jdbcType=INTEGER}
                </if>
                <if test="item.omsSynExpCount != null">
                    #{oms_syn_exp_count, jdbcType=INT}
                </if>
                <if test="item.supportCashOnDelivery != null">
                    #{support_cash_on_delivery, jdbcType=INT}
                </if>
                <if test="item.preSaleOrderBill != null">
                    #{pre_sale_order_bill, jdbcType=INT}
                </if>
            </trim>
        </foreach>
    </insert>
    <update id="batchUpdateByPrimaryKeySelective"
            parameterType="java.util.List">
        update ord_retail_order_bill
        <trim prefix="set" suffixOverrides=",">
            <trim prefix="id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.id != null">
                        when id=#{item.id} then #{item.id}
                    </if>
                </foreach>
            </trim>
            <trim prefix="pay_state =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.payState != null">
                        when id=#{item.id} then #{item.payState}
                    </if>
                </foreach>
            </trim>
            <trim prefix="customer_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.customerId != null">
                        when id=#{item.id} then #{item.customerId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="bill_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.billDate != null">
                        when id=#{item.id} then #{item.billDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="channel_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.channelId != null">
                        when id=#{item.id} then #{item.channelId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="amount_tag =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.amountTag != null">
                        when id=#{item.id} then #{item.amountTag}
                    </if>
                </foreach>
            </trim>
            <trim prefix="remarks =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.remarks != null">
                        when id=#{item.id} then #{item.remarks}
                    </if>
                </foreach>
            </trim>
            <trim prefix="currency_type_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.currencyTypeId != null">
                        when id=#{item.id} then #{item.currencyTypeId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="status =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.status != null">
                        when id=#{item.id} then #{item.status}
                    </if>
                </foreach>
            </trim>
            <trim prefix="qty =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.qty != null">
                        when id=#{item.id} then #{item.qty}
                    </if>
                </foreach>
            </trim>
            <trim prefix="submit_by =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.submitBy != null">
                        when id=#{item.id} then #{item.submitBy}
                    </if>
                </foreach>
            </trim>
            <trim prefix="canal_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.canalId != null">
                        when id=#{item.id} then #{item.canalId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="member_name =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.memberName != null">
                        when id=#{item.id} then #{item.memberName}
                    </if>
                </foreach>
            </trim>
            <trim prefix="platform_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.platformId != null">
                        when id=#{item.id} then #{item.platformId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="warehouse_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.warehouseId != null">
                        when id=#{item.id} then #{item.warehouseId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="virtual_warehouse_codes =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.virtualWareHouseCodes != null">
                        when id=#{item.id} then #{item.virtualWareHouseCodes}
                    </if>
                </foreach>
            </trim>
            <trim prefix="create_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.createDate != null">
                        when id=#{item.id} then #{item.createDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="amount_paid =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.amountPaid != null">
                        when id=#{item.id} then #{item.amountPaid}
                    </if>
                </foreach>
            </trim>
            <trim prefix="confirm_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.confirmDate != null">
                        when id=#{item.id} then #{item.confirmDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="shop_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.shopId != null">
                        when id=#{item.id} then #{item.shopId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="discount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.discount != null">
                        when id=#{item.id} then #{item.discount}
                    </if>
                </foreach>
            </trim>
            <trim prefix="vip_card_no =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.vipCardNo != null">
                        when id=#{item.id} then #{item.vipCardNo}
                    </if>
                </foreach>
            </trim>
            <trim prefix="bill_no =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.billNo != null">
                        when id=#{item.id} then #{item.billNo}
                    </if>
                </foreach>
            </trim>
            <trim prefix="brand_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.brandId != null">
                        when id=#{item.id} then #{item.brandId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="stock_channel_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.stockChannelId != null">
                        when id=#{item.id} then #{item.stockChannelId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="amount_goods =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.amountGoods != null">
                        when id=#{item.id} then #{item.amountGoods}
                    </if>
                </foreach>
            </trim>
            <trim prefix="modify_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.modifyDate != null">
                        when id=#{item.id} then #{item.modifyDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="distribution_state =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.distributionState != null">
                        when id=#{item.id} then #{item.distributionState}
                    </if>
                </foreach>
            </trim>
            <trim prefix="settle_channel_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.settleChannelId != null">
                        when id=#{item.id} then #{item.settleChannelId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="complete_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.completeDate != null">
                        when id=#{item.id} then #{item.completeDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="abolish_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.abolishDate != null">
                        when id=#{item.id} then #{item.abolishDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="confirm_by =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.confirmBy != null">
                        when id=#{item.id} then #{item.confirmBy}
                    </if>
                </foreach>
            </trim>
            <trim prefix="source_bill_no =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.sourceBillNo != null">
                        when id=#{item.id} then #{item.sourceBillNo}
                    </if>
                </foreach>
            </trim>
            <trim prefix="submit_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.submitDate != null">
                        when id=#{item.id} then #{item.submitDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="abolish_by =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.abolishBy != null">
                        when id=#{item.id} then #{item.abolishBy}
                    </if>
                </foreach>
            </trim>
            <trim prefix="business_date =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.businessDate != null">
                        when id=#{item.id} then #{item.businessDate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="modify_by =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.modifyBy != null">
                        when id=#{item.id} then #{item.modifyBy}
                    </if>
                </foreach>
            </trim>
            <trim prefix="express_fee =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.expressFee != null">
                        when id=#{item.id} then #{item.expressFee}
                    </if>
                </foreach>
            </trim>
            <trim prefix="create_by =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.createBy != null">
                        when id=#{item.id} then #{item.createBy}
                    </if>
                </foreach>
            </trim>
            <trim prefix="complete_by =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.completeBy != null">
                        when id=#{item.id} then #{item.completeBy}
                    </if>
                </foreach>
            </trim>
            <trim prefix="whareatype_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.whareatypeId != null">
                        when id=#{item.id} then #{item.whareatypeId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="delivery_type =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.deliveryType != null">
                        when id=#{item.id} then #{item.deliveryType}
                    </if>
                </foreach>
            </trim>
            <trim prefix="exchange_rate_type =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.exchangeratetype != null">
                        when id=#{item.id} then #{item.exchangeratetype}
                    </if>
                </foreach>
            </trim>
            <trim prefix="exchange_rate =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.exchangerate != null">
                        when id=#{item.id} then #{item.exchangerate}
                    </if>
                </foreach>
            </trim>
            <trim prefix="tax =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.tax != null">
                        when id=#{item.id} then #{item.tax}
                    </if>
                </foreach>
            </trim>
            <trim prefix="total_tax_price =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.totalTaxPrice != null">
                        when id=#{item.id} then #{item.totalTaxPrice}
                    </if>
                </foreach>
            </trim>
            <trim prefix="amount_standard_money =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.amountStandardMoney != null">
                        when id=#{item.id} then #{item.amountStandardMoney}
                    </if>
                </foreach>
            </trim>
            <trim prefix="tax_standard_money =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.taxStandardMoney != null">
                        when id=#{item.id} then #{item.taxStandardMoney}
                    </if>
                </foreach>
            </trim>
            <trim prefix="total_tax_price_standard_money =case"
                  suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.totalTaxPriceStandardMoney != null">
                        when id=#{item.id} then
                        #{item.totalTaxPriceStandardMoney}
                    </if>
                </foreach>
            </trim>
            <trim prefix="amount_total =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.amountTotal != null">
                        when id=#{item.id} then #{item.amountTotal}
                    </if>
                </foreach>
            </trim>
            <trim prefix="base_currency_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.baseCurrencyId != null">
                        when id=#{item.id} then #{item.baseCurrencyId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="receiver =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.receiver != null">
                        when id=#{item.id} then #{item.receiver}
                    </if>
                </foreach>
            </trim>
            <trim prefix="member_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.memberId != null">
                        when id=#{item.id} then #{item.memberId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="is_from_oms =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.isFromOms != null">
                        when id=#{item.id} then #{item.isFromOms}
                    </if>
                </foreach>
            </trim>
            <trim prefix="payable_amount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.payableAmount != null">
                        when id=#{item.id} then #{item.payableAmount}
                    </if>
                </foreach>
            </trim>
            <trim prefix="pay_settle_method_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.paySettleMethodId != null">
                        when id=#{item.id} then #{item.paySettleMethodId}
                    </if>
                </foreach>
            </trim>
            <trim prefix="wms_bill_no =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.wmsBillNo != null">
                        when id=#{item.id} then #{item.wmsBillNo}
                    </if>
                </foreach>
            </trim>
            <trim prefix="is_push_sap =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.isPushSap != null">
                        when id=#{item.id} then #{item.isPushSap}
                    </if>
                </foreach>
            </trim>
            <trim prefix="order_type =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.orderType != null">
                        when id=#{item.id} then #{item.orderType}
                    </if>
                </foreach>
            </trim>
            <trim prefix="oms_syn_order_status =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.omsSynOrderStatus != null">
                        when id=#{item.id} then #{item.omsSynOrderStatus}
                    </if>
                </foreach>
            </trim>
            <trim prefix="oms_syn_order_count =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.omsSynOrderCount != null">
                        when id=#{item.id} then #{item.omsSynOrderCount}
                    </if>
                </foreach>
            </trim>
            <trim prefix="oms_syn_exp_status =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.omsSynExpStatus != null">
                        when id=#{item.id} then #{item.omsSynExpStatus}
                    </if>
                </foreach>
            </trim>
            <trim prefix="oms_syn_exp_count =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.omsSynExpCount != null">
                        when id=#{item.id} then #{item.omsSynExpCount}
                    </if>
                </foreach>
            </trim>
            <trim prefix="support_cash_on_delivery =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.supportCashOnDelivery != null">
                        when id=#{item.id} then #{item.supportCashOnDelivery}
                    </if>
                </foreach>
            </trim>
            <trim prefix="pre_sale_order_bill =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.preSaleOrderBill != null">
                        when id=#{item.id} then #{item.preSaleOrderBill}
                    </if>
                </foreach>
            </trim>
            <trim prefix="goods_concession =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.goodsConcession != null">
                        when id=#{item.id} then #{item.goodsConcession}
                    </if>
                </foreach>
            </trim>
            <trim prefix="other_concession =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.otherConcession != null">
                        when id=#{item.id} then #{item.otherConcession}
                    </if>
                </foreach>
            </trim>
            <trim prefix="distribution_fee_amount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.distributionfeeAmount != null">
                        when id=#{item.id} then #{item.distributionfeeAmount}
                    </if>
                </foreach>
            </trim>
            <trim prefix="cash_coupon_amount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.cashCouponAmount != null">
                        when id=#{item.id} then #{item.cashCouponAmount}
                    </if>
                </foreach>
            </trim>
            <trim prefix="coupon_amount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.couponAmount != null">
                        when id=#{item.id} then #{item.couponAmount}
                    </if>
                </foreach>
            </trim>
            <trim prefix="coupons_info =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.couponsInfo != null">
                        when id=#{item.id} then #{item.couponsInfo}
                    </if>
                </foreach>
            </trim>
            <trim prefix="sales_promotion =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                    <if test="item.salesPromotion != null">
                        when id=#{item.id} then #{item.salesPromotion}
                    </if>
                </foreach>
            </trim>
        </trim>
        where id in
        <foreach collection="list" item="item" index="index"
                 separator="," open="(" close=")">
            #{item.id}
        </foreach>
    </update>

    <update id="updateBatchByBillNo" parameterType="Map">
        update ord_retail_order_bill set oms_syn_order_status=#{status}
        where bill_no in
        <foreach collection="ids" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </update>


    <select id="selectBySap" resultMap="BaseResultSAP">
        ${fields}
    </select>
    <update id="updateIsConfirm" parameterType="Map">
        update ord_retail_order_bill set is_confirm=#{status}
        where bill_no in
        <foreach collection="ids" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </update>

    <select id="queryRetailOrderBillMapToOms" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        SELECT
        o.bill_no AS billNo,
        o.source_bill_no AS source_bill_no,
        o.shop_id AS shop_id,
        o.platform_id AS platform_id,
        o.business_date as business_date,
        o.has_return as has_return,
        o.order_type as order_type,
        d.receiver AS receiver,
        d.receiver_tel AS receiver_tel,
        d.address AS address,
        d.delivery_type_id AS delivery_type_id,
        d.delivery_no AS delivery_no,
        s.pay_date AS pay_date,
        g.goods_id as goods_id
        FROM
        ord_retail_ord_goods_detail g
        LEFT JOIN ord_retail_ord_dis_info d ON g.bill_no = d.bill_no
        LEFT JOIN ord_retail_ord_settl_de s ON g.bill_no = s.bill_no
        LEFT JOIN ord_retail_order_bill o ON o.bill_no = g.bill_no
        <where>
            <if test="billNo != null and billNo != ''">
                o.bill_no = #{billNo}
            </if>
            <if test="sourceBillNo != null and sourceBillNo != ''">
                and o.source_bill_no = #{sourceBillNo}
            </if>
            <if test="businessdate_start != null and businessdate_start != ''">
                and o.business_date &gt;= #{businessdate_start}
            </if>
            <if test="hasReturn != null and hasReturn != ''">
                and o.has_return = #{hasReturn}
            </if>
            <if test="orderType != null and orderType != ''">
                and o.order_type = #{orderType}
            </if>
            <if test="businessdate_end != null and businessdate_end != ''">
                and o.business_date &lt;= #{businessdate_end}
            </if>
            <if test="channelId != null">
                and o.channel_id in
                <foreach collection="channelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="address != null and address != ''">
                and d.address like "%"#{address}"%"
            </if>
            <if test="receiverTel != null and receiverTel != ''">
                and d.receiver_tel = #{receiverTel}
            </if>
            <if test="barcode != null and barcode != ''">
                and g.barcode = #{barcode}
            </if>
            <if test="goodsId != null and goodsId != ''">
                and g.goods_id in (#{goodsId})
            </if>
        </where>
        ORDER BY o.business_date DESC
        <if test="stratRow != null and endRow != null">
            limit #{stratRow},#{endRow}
        </if>
    </select>

    <select id="getRetailOrderBillToOmsCountByMap" parameterType="java.util.HashMap"
            resultType="java.lang.Long">
        SELECT count(0)
        FROM
        ord_retail_ord_goods_detail g
        LEFT JOIN ord_retail_ord_dis_info d ON g.bill_no = d.bill_no
        LEFT JOIN ord_retail_ord_settl_de s ON g.bill_no = s.bill_no
        LEFT JOIN ord_retail_order_bill o ON o.bill_no = g.bill_no
        <where>
            <if test="billNo != null and billNo != ''">
                o.bill_no = #{billNo}
            </if>
            <if test="sourceBillNo != null and sourceBillNo != ''">
                and o.source_bill_no = #{sourceBillNo}
            </if>
            <if test="businessdate_start != null and businessdate_start != ''">
                and o.business_date &gt;= #{businessdate_start}
            </if>
            <if test="businessdate_end != null and businessdate_end != ''">
                and o.business_date &lt;= #{businessdate_end}
            </if>
            <if test="hasReturn != null and hasReturn != ''">
                and o.has_return = #{hasReturn}
            </if>
            <if test="orderType != null and orderType != ''">
                and o.order_type = #{orderType}
            </if>
            <if test="channelId != null">
                and o.channel_id in
                <foreach collection="channelId" item="item"
                         index="index" separator="," open="(" close=")">
                    #{item}
                </foreach>
            </if>
            <if test="address != null and address != ''">
                and d.address like "%"#{address}"%"
            </if>
            <if test="receiverTel != null and receiverTel != ''">
                and d.receiver_tel = #{receiverTel}
            </if>
            <if test="barcode != null and barcode != ''">
                and g.barcode = #{barcode}
            </if>
            <if test="goodsId != null and goodsId != ''">
                and g.goods_id in (#{goodsId})
            </if>
        </where>
    </select>
    <update id="batchUpdateHasReturnByBillNo"
            parameterType="java.util.List">
       <foreach item="item" index="index" collection="list" separator=";">
            update ord_retail_order_bill
            <set>
                <if test="item.hasReturn != null">
                    has_return = #{item.hasReturn}
                </if>
            </set>
            where
            <if test="item.billNo != null">
                bill_no = #{item.billNo}
            </if>
       </foreach>
    </update>

    <update id="batchTerm" parameterType="Map">
        update ord_retail_order_bill set status= #{termStatus},distribution_state= #{distributionState}
        where id in
        <foreach collection="ids" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=BIGINT}
        </foreach>
    </update>

    <update id="batchCheckOutByDeliveryOrderCode" parameterType="Map">
        update ord_retail_order_bill set status= #{status},distribution_state= #{distributionState},complete_by=#{completeBy},complete_date=#{completeDate}
        where bill_no in
        <foreach collection="ids" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </update>

    <update id="batchSendOutByDeliveryOrderCode" parameterType="Map">
        update ord_retail_order_bill set distribution_state= #{distributionState}
        where bill_no in
        <foreach collection="ids" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </update>

    <update id="updateDistributionStateById" parameterType="com.baison.e3plus.basebiz.order.api.model.RetailOrderBill">
        update ord_retail_order_bill set distribution_state = #{distributionState} where id = #{id}
    </update>
</mapper>