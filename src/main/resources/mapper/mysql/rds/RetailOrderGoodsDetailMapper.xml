<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper
	namespace="com.baison.e3plus.basebiz.order.service.dao.mapper.rds.RetailOrderGoodsDetailMapper">
	<resultMap id="BaseResultMap"
		type="com.baison.e3plus.basebiz.order.api.model.RetailOrderGoodsDetail">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="id" property="id" jdbcType="BIGINT" />
		<result column="owner_id" property="ownerId" jdbcType="INTEGER" />
		<result column="amount_tag" property="amountTag" jdbcType="DECIMAL" />
		<result column="barcode" property="barcode" jdbcType="VARCHAR" />
		<result column="retail_order_bill_id" property="retailOrderBillId"
			jdbcType="BIGINT" />
		<result column="status" property="status" jdbcType="INTEGER" />
		<result column="amount_retail" property="amountRetail"
			jdbcType="DECIMAL" />
		<result column="amount" property="amount" jdbcType="DECIMAL" />
		<result column="qty" property="qty" jdbcType="DECIMAL" />
		<result column="timestamp" property="timestamp" jdbcType="TIMESTAMP" />
		<result column="price_cost" property="priceCost" jdbcType="DECIMAL" />
		<result column="is_gift" property="isGift" jdbcType="VARCHAR" />
		<result column="amount_discount" property="amountDiscount"
			jdbcType="DECIMAL" />
		<result column="price" property="price" jdbcType="DECIMAL" />
		<result column="amount_cost" property="amountCost" jdbcType="DECIMAL" />
		<result column="amount_round" property="amountRound" jdbcType="DECIMAL" />
		<result column="amount_settle" property="amountSettle"
			jdbcType="DECIMAL" />
		<result column="amount_standard" property="amountStandard"
			jdbcType="DECIMAL" />
		<result column="discount" property="discount" jdbcType="DECIMAL" />
		<result column="price_retail" property="priceRetail" jdbcType="DECIMAL" />
		<result column="bill_no" property="billNo" jdbcType="VARCHAR" />
		<result column="singleproduct_id" property="singleProductId"
			jdbcType="INTEGER" />
		<result column="price_tag" property="priceTag" jdbcType="DECIMAL" />
		<result column="amount_share_settle" property="amountShareSettle"
			jdbcType="DECIMAL" />
		<result column="amount_verify" property="amountVerify"
			jdbcType="DECIMAL" />
		<result column="goods_id" property="goodsId" jdbcType="INTEGER" />
		<result column="wh_area_type_id" property="whAreaTypeId"
			jdbcType="INTEGER" />
		<result column="price_standard" property="priceStandard"
			jdbcType="DECIMAL" />
		<result column="qty_returned" property="qtyReturned" jdbcType="DECIMAL" />
		<result column="tax_inclusive_price" property="taxInclusivePrice"
			jdbcType="DECIMAL" />
		<result column="tax" property="tax" jdbcType="DECIMAL" />
		<result column="total_tax_price" property="totalTaxPrice"
			jdbcType="DECIMAL" />
		<result column="amount_standard_money" property="amountStandardMoney"
			jdbcType="DECIMAL" />
		<result column="tax_standard_money" property="taxStandardMoney"
			jdbcType="DECIMAL" />
		<result column="total_tax_price_standard_money" property="totalTaxPriceStandardMoney"
			jdbcType="DECIMAL" />
		<result column="weigh" property="weigh" jdbcType="DECIMAL" />
		<result column="set_meal_spec" property="setMealSpec" jdbcType="VARCHAR" />
		<result column="promotion_id" property="promotionId" jdbcType="VARCHAR" />
		<result column="promotion_no" property="promotionNo" jdbcType="VARCHAR" />
		<result column="promotion_name" property="promotionName" jdbcType="VARCHAR" />
		<result column="promotion_exchange_id" property="promotionExchangeId" jdbcType="VARCHAR" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, owner_id, amount_tag, barcode, retail_order_bill_id, status,
		amount_retail, amount,
		qty, timestamp, price_cost, is_gift,
		amount_discount, price, amount_cost,
		amount_round,
		amount_settle,
		amount_standard, discount, price_retail, bill_no, singleproduct_id,
		price_tag, amount_share_settle, amount_verify, goods_id,
		wh_area_type_id, price_standard,
		qty_returned, tax_inclusive_price,
		tax, total_tax_price, amount_standard_money,
		tax_standard_money,
		total_tax_price_standard_money, weigh,set_meal_spec,promotion_id,promotion_no,promotion_name,promotion_exchange_id
	</sql>
	<sql id="sum">
  		sum(total_tax_price_standard_money) as total_tax_price_standard_money, sum(total_tax_price) as total_tax_price, sum(qty) as qty, sum(amount) as amount
  	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<if test="fields != null">
			${fields}
		</if>
		<if test="fields == null">
			<include refid="Base_Column_List" />
		</if>
		from ord_retail_ord_goods_detail
		where id in
		<foreach item="id" index="index" collection="ids" open="("
			separator="," close=")">
			#{id,jdbcType=BIGINT}
		</foreach>
	</select>
	<select id="selectByBillNo" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
			<include refid="Base_Column_List" />
		from ord_retail_ord_goods_detail
		where bill_no in
		<foreach item="billNo" index="index" collection="billNoList" open="("
			separator="," close=")">
			#{billNo,jdbcType=VARCHAR}
		</foreach>
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from ord_retail_ord_goods_detail
		where id in
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item,jdbcType=BIGINT}
		</foreach>
	</delete>

	<delete id="deleteByRetailOrderId" parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from ord_retail_ord_goods_detail
		where retail_order_bill_id in
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item,jdbcType=VARCHAR}
		</foreach>
	</delete>
	
	<delete id="deleteByRetailOrderBillNo" parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from ord_retail_ord_goods_detail
		where bill_no in
		<foreach item="item" index="index" collection="list" open="("
			separator="," close=")">
			#{item,jdbcType=VARCHAR}
		</foreach>
	</delete>

	<insert id="insert"
		parameterType="com.baison.e3plus.basebiz.order.api.model.RetailOrderGoodsDetail">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into ord_retail_ord_goods_detail (id, owner_id, amount_tag,
		barcode, retail_order_bill_id, status,
		amount_retail, amount, qty,
		timestamp, price_cost, is_gift,
		amount_discount, price, amount_cost,
		amount_round, amount_settle, amount_standard,
		discount, price_retail,
		bill_no,
		singleproduct_id, price_tag, amount_share_settle,
		amount_verify, goods_id, wh_area_type_id,
		price_standard, qty_returned,
		tax_inclusive_price,
		tax, total_tax_price, amount_standard_money,
		tax_standard_money, total_tax_price_standard_money,
		weigh,set_meal_spec,promotion_id,promotion_no,promotion_name,promotion_exchange_id)
		values
		(#{id,jdbcType=BIGINT}, #{ownerId,jdbcType=INTEGER},
		#{amountTag,jdbcType=DECIMAL},
		#{barcode,jdbcType=VARCHAR},
		#{retailOrderBillId,jdbcType=BIGINT}, #{status,jdbcType=INTEGER},
		#{amountRetail,jdbcType=DECIMAL}, #{amount,jdbcType=DECIMAL},
		#{qty,jdbcType=DECIMAL},
		#{timestamp,jdbcType=TIMESTAMP},
		#{priceCost,jdbcType=DECIMAL}, #{isGift,jdbcType=VARCHAR},
		#{amountDiscount,jdbcType=DECIMAL}, #{price,jdbcType=DECIMAL},
		#{amountCost,jdbcType=DECIMAL},
		#{amountRound,jdbcType=DECIMAL},
		#{amountSettle,jdbcType=DECIMAL}, #{amountStandard,jdbcType=DECIMAL},
		#{discount,jdbcType=DECIMAL}, #{priceRetail,jdbcType=DECIMAL},
		#{billNo,jdbcType=VARCHAR},
		#{singleProductId,jdbcType=INTEGER},
		#{priceTag,jdbcType=DECIMAL}, #{amountShareSettle,jdbcType=DECIMAL},
		#{amountVerify,jdbcType=DECIMAL}, #{goodsId,jdbcType=INTEGER},
		#{whAreaTypeId,jdbcType=INTEGER},
		#{priceStandard,jdbcType=DECIMAL},
		#{qtyReturned,jdbcType=DECIMAL},
		#{taxInclusivePrice,jdbcType=DECIMAL},
		#{tax,jdbcType=DECIMAL},
		#{totalTaxPrice,jdbcType=DECIMAL},
		#{amountStandardMoney,jdbcType=DECIMAL},
		#{taxStandardMoney,jdbcType=DECIMAL},
		#{totalTaxPriceStandardMoney,jdbcType=DECIMAL},
		#{weigh,jdbcType=DECIMAL}),
		#{setMealSpec,jdbcType=VARCHAR}),
		#{promotionId,jdbcType=VARCHAR}),
		#{promotionNo,jdbcType=VARCHAR}),
		#{promotionName,jdbcType=VARCHAR}),
		#{promotionExchangeId,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->

		<foreach collection="list" item="item" index="index" separator=";">
			insert into ord_retail_ord_goods_detail
			<trim prefix="(" suffix=")" suffixOverrides=",">
				<if test="item.id != null">
					id,
				</if>
				<if test="item.ownerId != null">
					owner_id,
				</if>
				<if test="item.amountTag != null">
					amount_tag,
				</if>
				<if test="item.barcode != null">
					barcode,
				</if>
				<if test="item.retailOrderBillId != null">
					retail_order_bill_id,
				</if>
				<if test="item.status != null">
					status,
				</if>
				<if test="item.amountRetail != null">
					amount_retail,
				</if>
				<if test="item.amount != null">
					amount,
				</if>
				<if test="item.qty != null">
					qty,
				</if>
				<if test="item.timestamp != null">
					timestamp,
				</if>
				<if test="item.priceCost != null">
					price_cost,
				</if>
				<if test="item.isGift != null">
					is_gift,
				</if>
				<if test="item.amountDiscount != null">
					amount_discount,
				</if>
				<if test="item.price != null">
					price,
				</if>
				<if test="item.amountCost != null">
					amount_cost,
				</if>
				<if test="item.amountRound != null">
					amount_round,
				</if>
				<if test="item.amountSettle != null">
					amount_settle,
				</if>
				<if test="item.amountStandard != null">
					amount_standard,
				</if>
				<if test="item.discount != null">
					discount,
				</if>
				<if test="item.priceRetail != null">
					price_retail,
				</if>
				<if test="item.billNo != null">
					bill_no,
				</if>
				<if test="item.singleProductId != null">
					singleproduct_id,
				</if>
				<if test="item.priceTag != null">
					price_tag,
				</if>
				<if test="item.amountShareSettle != null">
					amount_share_settle,
				</if>
				<if test="item.amountVerify != null">
					amount_verify,
				</if>
				<if test="item.goodsId != null">
					goods_id,
				</if>
				<if test="item.whAreaTypeId != null">
					wh_area_type_id,
				</if>
				<if test="item.priceStandard != null">
					price_standard,
				</if>
				<if test="item.qtyReturned != null">
					qty_returned,
				</if>
				<if test="item.taxInclusivePrice != null">
					tax_inclusive_price,
				</if>
				<if test="item.tax != null">
					tax,
				</if>
				<if test="item.totalTaxPrice != null">
					total_tax_price,
				</if>
				<if test="item.amountStandardMoney != null">
					amount_standard_money,
				</if>
				<if test="item.taxStandardMoney != null">
					tax_standard_money,
				</if>
				<if test="item.totalTaxPriceStandardMoney != null">
					total_tax_price_standard_money,
				</if>
				<if test="item.weigh != null">
					weigh,
				</if>
    	        <if test="item.setMealSpec != null">
					set_meal_spec,
				</if>
    	        <if test="item.promotionId != null">
					promotion_id,
				</if>
    	        <if test="item.promotionNo != null">
					promotion_no,
				</if>
    	        <if test="item.promotionName != null">
					promotion_name,
				</if>
    	        <if test="item.promotionExchangeId != null">
					promotion_exchange_id,
				</if>
			</trim>
			<trim prefix="values (" suffix=")" suffixOverrides=",">
				<if test="item.id != null">
					#{item.id,jdbcType=BIGINT},
				</if>
				<if test="item.ownerId != null">
					#{item.ownerId,jdbcType=INTEGER},
				</if>
				<if test="item.amountTag != null">
					#{item.amountTag,jdbcType=DECIMAL},
				</if>
				<if test="item.barcode != null">
					#{item.barcode,jdbcType=VARCHAR},
				</if>
				<if test="item.retailOrderBillId != null">
					#{item.retailOrderBillId,jdbcType=BIGINT},
				</if>
				<if test="item.status != null">
					#{item.status,jdbcType=INTEGER},
				</if>
				<if test="item.amountRetail != null">
					#{item.amountRetail,jdbcType=DECIMAL},
				</if>
				<if test="item.amount != null">
					#{item.amount,jdbcType=DECIMAL},
				</if>
				<if test="item.qty != null">
					#{item.qty,jdbcType=DECIMAL},
				</if>
				<if test="item.timestamp != null">
					#{item.timestamp,jdbcType=TIMESTAMP},
				</if>
				<if test="item.priceCost != null">
					#{item.priceCost,jdbcType=DECIMAL},
				</if>
				<if test="item.isGift != null">
					#{item.isGift,jdbcType=VARCHAR},
				</if>
				<if test="item.amountDiscount != null">
					#{item.amountDiscount,jdbcType=DECIMAL},
				</if>
				<if test="item.price != null">
					#{item.price,jdbcType=DECIMAL},
				</if>
				<if test="item.amountCost != null">
					#{item.amountCost,jdbcType=DECIMAL},
				</if>
				<if test="item.amountRound != null">
					#{item.amountRound,jdbcType=DECIMAL},
				</if>
				<if test="item.amountSettle != null">
					#{item.amountSettle,jdbcType=DECIMAL},
				</if>
				<if test="item.amountStandard != null">
					#{item.amountStandard,jdbcType=DECIMAL},
				</if>
				<if test="item.discount != null">
					#{item.discount,jdbcType=DECIMAL},
				</if>
				<if test="item.priceRetail != null">
					#{item.priceRetail,jdbcType=DECIMAL},
				</if>
				<if test="item.billNo != null">
					#{item.billNo,jdbcType=VARCHAR},
				</if>
				<if test="item.singleProductId != null">
					#{item.singleProductId,jdbcType=INTEGER},
				</if>
				<if test="item.priceTag != null">
					#{item.priceTag,jdbcType=DECIMAL},
				</if>
				<if test="item.amountShareSettle != null">
					#{item.amountShareSettle,jdbcType=DECIMAL},
				</if>
				<if test="item.amountVerify != null">
					#{item.amountVerify,jdbcType=DECIMAL},
				</if>
				<if test="item.goodsId != null">
					#{item.goodsId,jdbcType=INTEGER},
				</if>
				<if test="item.whAreaTypeId != null">
					#{item.whAreaTypeId,jdbcType=INTEGER},
				</if>
				<if test="item.priceStandard != null">
					#{item.priceStandard,jdbcType=DECIMAL},
				</if>
				<if test="item.qtyReturned != null">
					#{item.qtyReturned,jdbcType=DECIMAL},
				</if>
				<if test="item.taxInclusivePrice != null">
					#{item.taxInclusivePrice,jdbcType=DECIMAL},
				</if>
				<if test="item.tax != null">
					#{item.tax,jdbcType=DECIMAL},
				</if>
				<if test="item.totalTaxPrice != null">
					#{item.totalTaxPrice,jdbcType=DECIMAL},
				</if>
				<if test="item.amountStandardMoney != null">
					#{item.amountStandardMoney,jdbcType=DECIMAL},
				</if>
				<if test="item.taxStandardMoney != null">
					#{item.taxStandardMoney,jdbcType=DECIMAL},
				</if>
				<if test="item.totalTaxPriceStandardMoney != null">
					#{item.totalTaxPriceStandardMoney,jdbcType=DECIMAL},
				</if>
				<if test="item.weigh != null">
					#{item.weigh,jdbcType=DECIMAL},
				</if>
				<if test="item.setMealSpec != null">
					#{item.setMealSpec,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionId != null">
					#{item.promotionId,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionNo != null">
					#{item.promotionNo,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionName != null">
					#{item.promotionName,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionExchangeId != null">
					#{item.promotionExchangeId,jdbcType=VARCHAR},
				</if>
			</trim>

		</foreach>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="java.util.List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->

		<foreach item="item" collection="list">
			update ord_retail_ord_goods_detail
			<set>
				<if test="item.ownerId != null">
					owner_id = #{item.ownerId,jdbcType=INTEGER},
				</if>
				<if test="item.item.amountTag != null">
					amount_tag = #{item.amountTag,jdbcType=DECIMAL},
				</if>
				<if test="item.barcode != null">
					barcode = #{item.barcode,jdbcType=VARCHAR},
				</if>
				<if test="item.retailOrderBillId != null">
					retail_order_bill_id =
					#{item.retailOrderBillId,jdbcType=BIGINT},
				</if>
				<if test="item.status != null">
					status = #{item.status,jdbcType=INTEGER},
				</if>
				<if test="item.amountRetail != null">
					amount_retail = #{item.amountRetail,jdbcType=DECIMAL},
				</if>
				<if test="item.amount != null">
					amount = #{item.amount,jdbcType=DECIMAL},
				</if>
				<if test="item.qty != null">
					qty = #{item.qty,jdbcType=DECIMAL},
				</if>
				<if test="item.timestamp != null">
					timestamp = #{item.timestamp,jdbcType=TIMESTAMP},
				</if>
				<if test="item.priceCost != null">
					price_cost = #{item.priceCost,jdbcType=DECIMAL},
				</if>
				<if test="item.isGift != null">
					is_gift = #{item.isGift,jdbcType=VARCHAR},
				</if>
				<if test="item.amountDiscount != null">
					amount_discount = #{item.amountDiscount,jdbcType=DECIMAL},
				</if>
				<if test="item.price != null">
					price = #{item.price,jdbcType=DECIMAL},
				</if>
				<if test="item.amountCost != null">
					amount_cost = #{item.amountCost,jdbcType=DECIMAL},
				</if>
				<if test="item.amountRound != null">
					amount_round = #{item.amountRound,jdbcType=DECIMAL},
				</if>
				<if test="item.amountSettle != null">
					amount_settle = #{item.amountSettle,jdbcType=DECIMAL},
				</if>
				<if test="item.amountStandard != null">
					amount_standard = #{item.amountStandard,jdbcType=DECIMAL},
				</if>
				<if test="item.discount != null">
					discount = #{item.discount,jdbcType=DECIMAL},
				</if>
				<if test="item.priceRetail != null">
					price_retail = #{item.priceRetail,jdbcType=DECIMAL},
				</if>
				<if test="item.billNo != null">
					bill_no = #{item.billNo,jdbcType=VARCHAR},
				</if>
				<if test="item.singleProductId != null">
					singleproduct_id = #{item.singleProductId,jdbcType=INTEGER},
				</if>
				<if test="item.priceTag != null">
					price_tag = #{item.priceTag,jdbcType=DECIMAL},
				</if>
				<if test="item.amountShareSettle != null">
					amount_share_settle =
					#{item.amountShareSettle,jdbcType=DECIMAL},
				</if>
				<if test="item.amountVerify != null">
					amount_verify = #{item.amountVerify,jdbcType=DECIMAL},
				</if>
				<if test="item.goodsId != null">
					goods_id = #{item.goodsId,jdbcType=INTEGER},
				</if>
				<if test="item.whAreaTypeId != null">
					wh_area_type_id = #{item.whAreaTypeId,jdbcType=INTEGER},
				</if>
				<if test="item.priceStandard != null">
					price_standard = #{item.priceStandard,jdbcType=DECIMAL},
				</if>
				<if test="item.qtyReturned != null">
					qty_returned = #{item.qtyReturned,jdbcType=DECIMAL},
				</if>
				<if test="item.taxInclusivePrice != null">
					tax_inclusive_price =
					#{item.taxInclusivePrice,jdbcType=DECIMAL},
				</if>
				<if test="item.tax != null">
					tax = #{item.tax,jdbcType=DECIMAL},
				</if>
				<if test="item.totalTaxPrice != null">
					total_tax_price = #{item.totalTaxPrice,jdbcType=DECIMAL},
				</if>
				<if test="item.amountStandardMoney != null">
					amount_standard_money =
					#{item.amountStandardMoney,jdbcType=DECIMAL},
				</if>
				<if test="item.taxStandardMoney != null">
					tax_standard_money =
					#{item.taxStandardMoney,jdbcType=DECIMAL},
				</if>
				<if test="item.totalTaxPriceStandardMoney != null">
					total_tax_price_standard_money =
					#{item.totalTaxPriceStandardMoney,jdbcType=DECIMAL},
				</if>
				<if test="item.weigh != null">
					weigh = #{item.weigh,jdbcType=DECIMAL},
				</if>
				<if test="item.setMealSpec != null">
					set_meal_spec =
					#{item.setMealSpec,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionId != null">
					promotion_id =
					#{item.promotionId,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionNo != null">
					promotion_no =
					#{item.promotionNo,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionName != null">
					promotion_name =
					#{item.promotionName,jdbcType=VARCHAR},
				</if>
				<if test="item.promotionExchangeId != null">
					promotion_exchange_id =
					#{item.promotionExchangeId,jdbcType=VARCHAR},
				</if>
				
			</set>
			where id = #{item.id,jdbcType=BIGINT}
		</foreach>

	</update>
	<update id="updateByPrimaryKey"
		parameterType="com.baison.e3plus.basebiz.order.api.model.RetailOrderGoodsDetail">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update ord_retail_ord_goods_detail
		set owner_id =
		#{ownerId,jdbcType=INTEGER},
		amount_tag =
		#{amountTag,jdbcType=DECIMAL},
		barcode = #{barcode,jdbcType=VARCHAR},
		retail_order_bill_id = #{retailOrderBillId,jdbcType=BIGINT},
		status =
		#{status,jdbcType=INTEGER},
		amount_retail =
		#{amountRetail,jdbcType=DECIMAL},
		amount = #{amount,jdbcType=DECIMAL},
		qty = #{qty,jdbcType=DECIMAL},
		timestamp =
		#{timestamp,jdbcType=TIMESTAMP},
		price_cost =
		#{priceCost,jdbcType=DECIMAL},
		is_gift = #{isGift,jdbcType=VARCHAR},
		amount_discount = #{amountDiscount,jdbcType=DECIMAL},
		price =
		#{price,jdbcType=DECIMAL},
		amount_cost =
		#{amountCost,jdbcType=DECIMAL},
		amount_round =
		#{amountRound,jdbcType=DECIMAL},
		amount_settle =
		#{amountSettle,jdbcType=DECIMAL},
		amount_standard =
		#{amountStandard,jdbcType=DECIMAL},
		discount =
		#{discount,jdbcType=DECIMAL},
		price_retail =
		#{priceRetail,jdbcType=DECIMAL},
		bill_no = #{billNo,jdbcType=VARCHAR},
		singleproduct_id = #{singleProductId,jdbcType=INTEGER},
		price_tag =
		#{priceTag,jdbcType=DECIMAL},
		amount_share_settle =
		#{amountShareSettle,jdbcType=DECIMAL},
		amount_verify =
		#{amountVerify,jdbcType=DECIMAL},
		goods_id =
		#{goodsId,jdbcType=INTEGER},
		wh_area_type_id =
		#{whAreaTypeId,jdbcType=INTEGER},
		price_standard =
		#{priceStandard,jdbcType=DECIMAL},
		qty_returned =
		#{qtyReturned,jdbcType=DECIMAL},
		tax_inclusive_price =
		#{taxInclusivePrice,jdbcType=DECIMAL},
		tax = #{tax,jdbcType=DECIMAL},
		total_tax_price = #{totalTaxPrice,jdbcType=DECIMAL},
		amount_standard_money = #{amountStandardMoney,jdbcType=DECIMAL},
		tax_standard_money = #{taxStandardMoney,jdbcType=DECIMAL},
		total_tax_price_standard_money =
		#{totalTaxPriceStandardMoney,jdbcType=DECIMAL},
		weigh = #{weigh,jdbcType=DECIMAL},
		set_meal_spec = #{setMealSpec,jdbcType=VARCHAR}, 
		promotion_id = #{promotionId,jdbcType=VARCHAR}, 
		promotion_no = #{promotionNo,jdbcType=VARCHAR}, 
		promotion_name = #{promotionName,jdbcType=VARCHAR}, 
		promotion_exchange_id = #{promotionExchangeId,jdbcType=VARCHAR}
		where id = #{id,jdbcType=BIGINT}
	</update>

	<select id="getListCount" parameterType="Map" resultType="Long">
		select count(0) from ord_retail_ord_goods_detail

		<where>
			<if test="ownerId != null">
				and owner_id = #{ownerId}
			</if>
			<if test="barcode != null">
				and barcode = #{barcode}
			</if>
			<if test="retailOrderBillId != null">
				and retail_order_bill_id = #{retailOrderBillId}
			</if>
			<if test="status != null">
				and status = #{status}
			</if>
			<if test="isGift != null">
				and is_gift = #{isGift}
			</if>
			<if test="billNo != null">
				and bill_no = #{billNo}
			</if>
			<if test="singleProductId != null">
				and singleproduct_id = #{singleProductId}
			</if>
			<if test="goodsId != null">
				and goods_id = #{goodsId}
			</if>
			<if test="whAreaTypeId != null">
				and wh_area_type_id = #{whAreaTypeId}
			</if>
		</where>
	</select>

	<select id="queryPage" parameterType="Map" resultMap="BaseResultMap">
		select

		<include refid="Base_Column_List" />

		from ord_retail_ord_goods_detail

		<where>
			<if test="ownerId != null">
				and owner_id = #{ownerId}
			</if>
			<if test="barcode != null">
				and barcode = #{barcode}
			</if>
			<if test="retailOrderBillId != null">
				and retail_order_bill_id = #{retailOrderBillId}
			</if>
			<if test="status != null">
				and status = #{status}
			</if>
			<if test="isGift != null">
				and is_gift = #{isGift}
			</if>
			<if test="billNo != null">
				and bill_no = #{billNo}
			</if>
			<if test="singleProductId != null">
				and singleproduct_id = #{singleProductId}
			</if>
			<if test="goodsId != null">
				and goods_id = #{goodsId}
			</if>
			<if test="whAreaTypeId != null">
				and wh_area_type_id = #{whAreaTypeId}
			</if>
			<if test="billNoList != null">
				and bill_no in
				<foreach collection="billNoList" open="(" close=")" item="item" separator=",">
					#{item}
				</foreach>
			</if>
		</where>
		<if test="stratRow != null and endRow != null">
			limit #{stratRow},#{endRow}
		</if>
	</select>
	<update id="batchUpdateByPrimaryKeySelective" parameterType="java.util.List">
    update ord_retail_ord_goods_detail
        <trim prefix="set" suffixOverrides=",">
            <trim prefix="owner_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.ownerId != null">
                    when id=#{item.id} then #{item.ownerId}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_tag =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountTag != null">
                    when id=#{item.id} then #{item.amountTag}
                  </if>
                </foreach>
            </trim>
            <trim prefix="barcode =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.barcode != null">
                    when id=#{item.id} then #{item.barcode}
                  </if>
                </foreach>
            </trim>
            <trim prefix="retail_order_bill_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.retailOrderBillId != null">
                    when id=#{item.id} then #{item.retailOrderBillId}
                  </if>
                </foreach>
            </trim>
            <trim prefix="status =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.status != null">
                    when id=#{item.id} then #{item.status}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_retail =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountRetail != null">
                    when id=#{item.id} then #{item.amountRetail}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amount != null">
                    when id=#{item.id} then #{item.amount}
                  </if>
                </foreach>
            </trim>
            <trim prefix="qty =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.qty != null">
                    when id=#{item.id} then #{item.qty}
                  </if>
                </foreach>
            </trim>
            <trim prefix="timestamp =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.timestamp != null">
                    when id=#{item.id} then #{item.timestamp}
                  </if>
                </foreach>
            </trim>
            <trim prefix="price_cost =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.priceCost != null">
                    when id=#{item.id} then #{item.priceCost}
                  </if>
                </foreach>
            </trim>
            <trim prefix="is_gift =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.isGift != null">
                    when id=#{item.id} then #{item.isGift}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_discount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountDiscount != null">
                    when id=#{item.id} then #{item.amountDiscount}
                  </if>
                </foreach>
            </trim>
            <trim prefix="price =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.price != null">
                    when id=#{item.id} then #{item.price}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_cost =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountCost != null">
                    when id=#{item.id} then #{item.amountCost}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_round =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountRound != null">
                    when id=#{item.id} then #{item.amountRound}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_settle =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountSettle != null">
                    when id=#{item.id} then #{item.amountSettle}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_standard =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountStandard != null">
                    when id=#{item.id} then #{item.amountStandard}
                  </if>
                </foreach>
            </trim>
            <trim prefix="discount =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.discount != null">
                    when id=#{item.id} then #{item.discount}
                  </if>
                </foreach>
            </trim>
            <trim prefix="price_retail =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.priceRetail != null">
                    when id=#{item.id} then #{item.priceRetail}
                  </if>
                </foreach>
            </trim>
            <trim prefix="singleproduct_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.singleProductId != null">
                    when id=#{item.id} then #{item.singleProductId}
                  </if>
                </foreach>
            </trim>
            <trim prefix="price_tag =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.priceTag != null">
                    when id=#{item.id} then #{item.priceTag}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_share_settle =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountShareSettle != null">
                    when id=#{item.id} then #{item.amountShareSettle}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_verify =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountVerify != null">
                    when id=#{item.id} then #{item.amountVerify}
                  </if>
                </foreach>
            </trim>
            <trim prefix="goods_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.goodsId != null">
                    when id=#{item.id} then #{item.goodsId}
                  </if>
                </foreach>
            </trim>
            <trim prefix="wh_area_type_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.whAreaTypeId != null">
                    when id=#{item.id} then #{item.whAreaTypeId}
                  </if>
                </foreach>
            </trim>
            <trim prefix="price_standard =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.priceStandard != null">
                    when id=#{item.id} then #{item.priceStandard}
                  </if>
                </foreach>
            </trim>
            <trim prefix="qty_returned =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.qtyReturned != null">
                    when id=#{item.id} then #{item.qtyReturned}
                  </if>
                </foreach>
            </trim>
            <trim prefix="tax_inclusive_price =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.taxInclusivePrice != null">
                    when id=#{item.id} then #{item.taxInclusivePrice}
                  </if>
                </foreach>
            </trim>
            <trim prefix="tax =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.tax != null">
                    when id=#{item.id} then #{item.tax}
                  </if>
                </foreach>
            </trim>
            <trim prefix="total_tax_price =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.totalTaxPrice != null">
                    when id=#{item.id} then #{item.totalTaxPrice}
                  </if>
                </foreach>
            </trim>
            <trim prefix="amount_standard_money =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.amountStandardMoney != null">
                    when id=#{item.id} then #{item.amountStandardMoney}
                  </if>
                </foreach>
            </trim>
            <trim prefix="tax_standard_money =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.taxStandardMoney != null">
                    when id=#{item.id} then #{item.taxStandardMoney}
                  </if>
                </foreach>
            </trim>
            <trim prefix="total_tax_price_standard_money =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.totalTaxPriceStandardMoney != null">
                    when id=#{item.id} then #{item.totalTaxPriceStandardMoney}
                  </if>
                </foreach>
            </trim>
            <trim prefix="weigh =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.weigh != null">
                    when id=#{item.id} then #{item.weigh}
                  </if>
                </foreach>
            </trim>
            <trim prefix="set_meal_spec =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.setMealSpec != null">
                    when id=#{item.id} then #{item.setMealSpec}
                  </if>
                </foreach>
            </trim>
            <trim prefix="promotion_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.promotionId != null">
                    when id=#{item.id} then #{item.promotionId}
                  </if>
                </foreach>
            </trim>
            <trim prefix="promotion_no =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.promotionNo != null">
                    when id=#{item.id} then #{item.promotionNo}
                  </if>
                </foreach>
            </trim>
            <trim prefix="promotion_name =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.promotionName != null">
                    when id=#{item.id} then #{item.promotionName}
                  </if>
                </foreach>
            </trim>
            <trim prefix="promotion_exchange_id =case" suffix="end,">
                <foreach collection="list" item="item" index="index">
                  <if test="item.promotionExchangeId != null">
                    when id=#{item.id} then #{item.promotionExchangeId}
                  </if>
                </foreach>
            </trim>
        </trim>
        where id in
        <foreach collection="list" item="item" index="index" separator="," open="(" close=")">
        #{item.id}
        </foreach>
    </update>
    
    <select id="sum" parameterType="com.baison.e3plus.basebiz.order.api.model.RetailReturnGoodsDetail" resultMap="BaseResultMap">
   		select 
   		<include refid="sum" />
   			from ord_retail_ord_goods_detail
		<where>
			<if test="ownerId != null">
				and owner_id = #{ownerId}
			</if>
			<if test="barcode != null">
				and barcode = #{barcode}
			</if>
			<if test="retailOrderBillId != null">
				and retail_order_bill_id = #{retailOrderBillId}
			</if>
			<if test="status != null">
				and status = #{status}
			</if>
			<if test="isGift != null">
				and is_gift = #{isGift}
			</if>
			<if test="billNo != null">
				and bill_no = #{billNo}
			</if>
			<if test="singleProductId != null">
				and singleproduct_id = #{singleProductId}
			</if>
			<if test="goodsId != null">
				and goods_id = #{goodsId}
			</if>
			<if test="whAreaTypeId != null">
				and wh_area_type_id = #{whAreaTypeId}
			</if>
		</where>
		<if test="stratRow != null and endRow != null">
			limit #{stratRow},#{endRow}
		</if>
	<if test="stratRow != null and endRow != null">
      limit #{stratRow},#{endRow}
    </if>
    </select>
    
    <update id="updateBarcode" parameterType="java.lang.String">
    	update ord_retail_ord_goods_detail set barcode = #{newBarcode}
        where barcode = #{oldBarcode}
    </update>
    
    
</mapper>